
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>forest simulator 3d</title>
		<style>
			* {
				box-sizing: border-box;
			}
			html,body {
				width: 100%;
				height: 100%;
			}
			body {
				margin: 0;
				overflow: hidden;
			}
			#canvas-wrapper,#game,#thing {
				width: 100%;
				height: 100%;
				outline: none;
			}
			#game {
				user-select: none;
			}
			#canvas,#darkness {
				position: absolute;
				width: 100%;
				height: 100%;
			}
			#shop-button {
				position: absolute;
				top: 10px;
				right: 10px;
				color: black;
				background-color: white;
				border: 5px solid black;
				border-radius: 5px;
				padding: 10px;
				font-family: Arial, Helvetica, sans-serif;
				font-size: 20px;
			}
			#shop {
				display: none;
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translate(-50%, -50%);
				background-color: white;
				border-radius: 10px;
				border: 5px solid black;
				padding: 5px;
				width: 80%;
				height: calc(100% - 100px);
				overflow: auto;
			}
			#stats {
				margin: 0;
				position: absolute;
				left: 10px;
				top: 2px;
				font-family: Arial, sans-serif;
				color: yellow;
				font-size: 30px;
				text-shadow: 0px 0px 3px black;
			}
			h1,h2,h3,h4 {
				margin: 0;
			}
			#health {
				position: absolute;
				bottom: 0px;
				left: 0px;
				width: 600px;
				height: 50px;
				background-color: black;
			}
			#health-inner {
				width: 600px;
				height: 50px;
				background-color: rgb(0, 255, 0);
			}
			#oxygen {
				position: absolute;
				bottom: 50px;
				left: 0px;
				width: 600px;
				height: 50px;
				background-color: black;
			}
			#oxygen-inner {
				width: 600px;
				height: 50px;
				background-color: rgb(0, 0, 255);
			}
			#joystick {
				position: absolute;
				display: flex;
				align-items: center;
				justify-content: center;
				bottom: 100px;
				right: 100px;
				width: 200px;
				height: 200px;
				background-color: gray;
				border-radius: 50%;
				opacity: 0.8;
				display: none;
			}
			#circle-thing {
				width: 50px;
				height: 50px;
				background-color: lightgray;
				border-radius: 50%;
				transform: translate(0px, 0px);
			}
			#shop-coins {
				width: 50%;
				float: left;
			}
			#shop-gems {
				width: 50%;
				float: right;
			}
			#notification {
				font-family: Arial, sans-serif;
				position: absolute;
				font-size: 30px;
				color: yellow;
				bottom: 10%;
				left: 0px;
				width: 100%;
				text-align: center;
				text-shadow: 0px 0px 3px black;
			}
			#obelisk-shop {
				display: none;
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translate(-50%, -50%);
				background-color: white;
				border-radius: 10px;
				border: 5px solid black;
				padding: 5px;
				width: 80%;
				height: calc(100% - 100px);
				overflow: auto;
			}
			#obelisk-shop-button {
				position: absolute;
				top: 70px;
				right: 10px;
				color: black;
				background-color: white;
				border: 5px solid black;
				border-radius: 5px;
				padding: 10px;
				font-family: Arial, Helvetica, sans-serif;
				font-size: 20px;
			}
			#hacker-console {
				display: none;
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translate(-50%, -50%);
				background-color: white;
				border-radius: 10px;
				border: 5px solid black;
				padding: 5px;
				width: 80%;
				height: calc(100% - 100px);
				overflow: auto;
			}
			#menu {
				position: absolute;
				display: flex;
				align-items: center;
				justify-content: space-around;
				flex-direction: column;
				top: 0px;
				left: 0px;
				width: 100%;
				height: 100%;
				background-image: url("https://www.adorama.com/alc/wp-content/uploads/2018/11/landscape-photography-tips-yosemite-valley-feature.jpg");
				background-size: 100% 100%;
				padding: 50px;
			}
			#menu-title {
				font-family: Arial, Helvetica, sans-serif;
				font-size: 60px;
				color: white;
				text-shadow: 3px 3px 5px black;
			}
			#menu-button {
				font-size: 30px;
				padding: 0.5em 5em;
				background-color: white;
				border: 3px solid black;
				border-radius: 10px;
				box-shadow: 3px 3px 10px black;
			}
			#menu-button:hover {
				box-shadow: inset 3px 3px 10px black;
			}
			button {
				background-color: white;
				border: 3px solid black;
				border-radius: 5px;
			}
			button:hover {
				background-color: #DDDDDD;
			}
			button:focus {
				box-shadow: inset 0px 0px 5px black;
			}
			#arrow-keys {
				position: absolute;
				bottom: 10px;
				right: 10px;
				width: 300px;
				height: 100px;
				display: flex;
				flex-direction: column;
			}
			.arrow-key {
				color: white;
				background-color: rgba(100, 100, 100, 0.8);
				border-radius: 5px;
				font-family: Arial, Helvetica, sans-serif;
				width: 100px;
				height: 50px;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 30px;
			}
			.arrow-key:hover {
				background-color: rgba(80, 80, 80, 0.8);
			}
			.arrow-key:active {
				background-color: rgba(50, 50, 50, 0.9);
			}
			#arrow-keys-top {
				width: 300px;
				height: 50px;
				display: flex;
				flex-direction: row;
				justify-content: center;
			}
			#arrow-keys-bottom {
				width: 300px;
				height: 50px;
				display: flex;
				flex-direction: row;
			}
		</style>
	</head>
	<body>
		<div id="thing" tabindex="0" onkeydown="if (event.key === 'Escape') {shopButton()} else if (event.key === 'h' && developerMode) {openHackerConsole()}">
			<div id="game" tabindex="0" onmouseup="joystick.mouseUp(event);" ontouchend="joystick.mouseUp(event);" onmousemove="joystick.mouseMove(event);" ontouchmove="joystick.mouseMove(event);" oncontextmenu="return false;">
				<div id="canvas-wrapper" tabindex="0" onkeydown="keyDownFunction(event);" onkeyup="keysDown[event.key] = false;">
					<canvas id="canvas"></canvas>
					<canvas id="darkness"></canvas>
				</div>
				<div id="stats">score: -<br>coins: -</div>
				<button id="shop-button" onclick="shopButton();">SHOP</button>
				<button id="obelisk-shop-button" onclick="obeliskShopButton();">OBELISK</button>
				<div id="oxygen">
					<div id="oxygen-inner"></div>
				</div>
				<div id="health">
					<div id="health-inner"></div>
				</div>
				<div id="joystick" onmousedown="joystick.mouseDown(event);" ontouchstart="joystick.mouseDown(event);"><div id="circle-thing"></div></div>
				<div id="arrow-keys">
					<div id="arrow-keys-top">
						<div class="arrow-key arrow-up">^</div>
					</div><br>
					<div id="arrow-keys-bottom">
						<div class="arrow-key arrow-left">&lt;</div>
						<div class="arrow-key arrow-down">v</div>
						<div class="arrow-key arrow-right">&gt;</div>
					</div>
				</div>
			</div>
			<div id="shop">
				<h1>shop</h1>
				<div id="saves">
					<select id="save-slot-selector">
						<option value="0" selected>slot 0</option>
						<option value="1">slot 1</option>
						<option value="2">slot 2</option>
					</select>
					<button onclick="saveSlot(document.getElementById('save-slot-selector').value);">save</button>
					<button onclick="loadSlot(document.getElementById('save-slot-selector').value);">load</button>
				</div>
				<hr>
				<input type="checkbox" id="joystick-checkbox"><label for="joystick-checkbox">joystick</label><br>
				<input type="checkbox" id="animations-checkbox"><label for="animations-checkbox">animations</label>
				<div id="shop-coins">
					<div id="boots">
						<h3>boots</h3>
						<button onclick="clickShoeButton(this, 'sketchers');">Sketchers (0 coins)</button><br>
						<button onclick="clickShoeButton(this, 'tennis rackets');">Tennis rackets (30 coins)</button><br>
						<button onclick="clickShoeButton(this, 'running shoes');">Running shoes (60 coins)</button><br>
						<button onclick="clickShoeButton(this, 'spring boots');">Spring boots (90 coins)</button><br>
						<button onclick="clickShoeButton(this, 'spike boots');">Spike boots (100 coins)</button><br>
						<button onclick="clickShoeButton(this, 'feather boots');">Feather boots (120 coins)</button><br>
						<button onclick="clickShoeButton(this, 'stepping boots');">Stepping boots (150 coins)</button><br>
						<button onclick="clickShoeButton(this, 'magnet boots');">Magnet boots (170 coins)</button><br>
					</div><br>
					<div id="food">
						<h3>food</h3><br>
						<label>government meal</label><label id="government-meal-howmany">(0)</label><button onclick="devourFood('government meal');">devour</button><button onclick="purchaseFood('government meal');">purchase (1 coin)</button><br>
						<br>
						<label>apple</label><label id="apple-howmany">(0)</label><button onclick="devourFood('apple');">devour</button><button onclick="purchaseFood('apple');">purchase (5 coins)</button><br>
						<label>bread</label><label id="bread-howmany">(0)</label><button onclick="devourFood('bread');">devour</button><button onclick="purchaseFood('bread');">purchase (10 coins)</button><br>
						<label>burger</label><label id="burger-howmany">(0)</label><button onclick="devourFood('burger');">devour</button><button onclick="purchaseFood('burger');">purchase (14 coins)</button><br>
						<label>cold meal</label><label id="cold-meal-howmany">(0)</label><button onclick="devourFood('cold meal');">devour</button><button onclick="purchaseFood('cold meal');">purchase (19 coins)</button><br>
						<label>meal</label><label id="meal-howmany">(0)</label><button onclick="devourFood('meal');">devour</button><button onclick="purchaseFood('meal');">purchase (23 coins)</button><br>
						<label>warm meal</label><label id="warm-meal-howmany">(0)</label><button onclick="devourFood('warm meal');">devour</button><button onclick="purchaseFood('warm meal');">purchase (27 coins)</button><br>
						<label>hot meal</label><label id="hot-meal-howmany">(0)</label><button onclick="devourFood('hot meal');">devour</button><button onclick="purchaseFood('hot meal');">purchase (31 coins)</button><br>
						<label>crispy gooey homemade mac and cheese</label><label id="crispy-gooey-homemade-mac-and-cheese-howmany">(0)</label><button onclick="devourFood('crispy gooey homemade mac and cheese');">devour</button><button onclick="purchaseFood('crispy gooey homemade mac and cheese');">purchase (34 coins)</button><br>
						<label>cow brain</label><label id="cow-brain-howmany">(0)</label><button onclick="devourFood('cow brain');">devour</button><button onclick="purchaseFood('cow brain');">purchase (38 coins)</button><br>
						<label>filling warm meal</label><label id="filling-warm-meal-howmany">(0)</label><button onclick="devourFood('filling warm meal');">devour</button><button onclick="purchaseFood('filling warm meal');">purchase (41 coins)</button><br>
						<br>
						<label>buckwheat pancake</label><label id="buckwheat-pancake-howmany">(0)</label><button onclick="devourFood('buckwheat pancake');">devour</button><button onclick="purchaseFood('buckwheat pancake');">purchase (47 coins)</button><br>
						<label>sopping meal</label><label id="sopping-meal-howmany">(0)</label><button onclick="devourFood('sopping meal');">devour</button><button onclick="purchaseFood('sopping meal');">purchase (52 coins)</button><br>
						<label>emptying cold meal</label><label id="emptying-cold-meal-howmany">(0)</label><button onclick="devourFood('emptying cold meal');">devour</button><button onclick="purchaseFood('emptying cold meal');">purchase (56 coins)</button><br>
						<label>piping hot meal</label><label id="piping-hot-meal-howmany">(0)</label><button onclick="devourFood('piping hot meal');">devour</button><button onclick="purchaseFood('piping hot meal');">purchase (59 coins)</button><br>
						<label>styrofoam tupperware baggy full of a reheated rehydrated piping hot filling sloppy sopping warm meal portion</label><label id="styrofoam-tupperware-baggy-full-of-a-reheated-rehydrated-piping-hot-filling-sloppy-sopping-warm-meal-portion-howmany">(0)</label><button onclick="devourFood('styrofoam tupperware baggy full of a reheated rehydrated piping hot filling sloppy sopping warm meal portion');">devour</button><button onclick="purchaseFood('styrofoam tupperware baggy full of a reheated rehydrated piping hot filling sloppy sopping warm meal portion');">purchase (62 coins)</button>
					</div><br>
					<div id="stuff">
						<h3>stuff</h3><br>
						<label>ladder</label><label id="ladder-howmany">(0)</label><button onclick="placeLadder();">place</button><button onclick="purchaseLadder();">purchase (10 coins)</button><br>
						<label>tall ladder</label><label id="tall-ladder-howmany">(0)</label><button onclick="placeTallLadder();">place</button><button onclick="purchaseTallLadder();">purchase (25 coins)</button><br>
						<label>scaffolding</label><button onclick="purchaseScaffolding();">place (1 coin/block)</button><br>
						<label>trampoline</label><label id="trampoline-howmany">(0)</label><button onclick="placeTrampoline();">place</button><button onclick="purchaseTrampoline();">purchase (45 coins)</button><br>
					</div>
				</div>
				<div id="shop-gems">
					<div id="potions">
						<h3>alchemy (potions)</h3>
						<label>night vision potion (30 seconds)</label><label id="night-vision-potion-howmany">(0)</label><button onclick="chugPotion('night vision potion');">chug</button><button onclick="brewPotion('night vision potion');">brew (1 gem)</button><br>
						<label>speed potion (10 seconds)</label><label id="speed-potion-howmany">(0)</label><button onclick="chugPotion('speed potion');">chug</button><button onclick="brewPotion('speed potion');">brew (2 gems)</button><br>
						<label>jumping potion (10 seconds)</label><label id="jumping-potion-howmany">(0)</label><button onclick="chugPotion('jumping potion');">chug</button><button onclick="brewPotion('jumping potion');">brew (3 gems)</button><br>
						<label>regeneration potion (10 seconds)</label><label id="regeneration-potion-howmany">(0)</label><button onclick="chugPotion('regeneration potion');">chug</button><button onclick="brewPotion('regeneration potion');">brew (5 gems)</button><br>
						<label>spider potion (10 seconds)</label><label id="spider-potion-howmany">(0)</label><button onclick="chugPotion('spider potion');">chug</button><button onclick="brewPotion('spider potion');">brew (7 gems)</button><br>
						<label>levitation potion (10 seconds)</label><label id="levitation-potion-howmany">(0)</label><button onclick="chugPotion('levitation potion');">chug</button><button onclick="brewPotion('levitation potion');">brew (8 gems)</button><br>
						<label>anti gravity potion (10 seconds)</label><label id="anti-gravity-potion-howmany">(0)</label><button onclick="chugPotion('anti gravity potion');">chug</button><button onclick="brewPotion('anti gravity potion');">brew (10 gems)</button><br>
						<label>bird potion (10 seconds)</label><label id="bird-potion-howmany">(0)</label><button onclick="chugPotion('bird potion');">chug</button><button onclick="brewPotion('bird potion');">brew (12 gems)</button>
					</div>
				</div>
			</div>
			<div id="obelisk-shop">
				<h1>obelisk</h1>
				<hr>
				<label>health</label><button onclick="obeliskShopUpgradeButton('health');">upgrade (1 totem)</button><br>
				<label>speed</label><button onclick="obeliskShopUpgradeButton('speed');">upgrade (1 totem)</button><br>
				<label>jump</label><button onclick="obeliskShopUpgradeButton('jump');">upgrade (1 totem)</button><br>
				<label>step</label><button onclick="obeliskShopUpgradeButton('step');">upgrade (1 totem)</button><br>
			</div>
			<div id="hacker-console">
				<h1>hacker console</h1>
				<hr>
				<label for="spawn-golem-type">spawn golem</label><select id="spawn-golem-type">
					<option value="golem" selected>golem</option>
					<option value="russet golem">russet golem</option>
					<option value="aqua golem">aqua golem</option>
					<option value="mecha golem">mecha golem</option>
				</select><button onclick="placeGolem(document.getElementById('spawn-golem-type').value, playerX);">spawn</button><br>
			</div>
			<div id="notification">

			</div>
		</div>
		<div id="menu">
			<h1 id="menu-title">forest simulator 3d</h1>
			<button id="menu-button" onclick="playButton();">PLAY</button>
		</div>
		<script id="vertex" type="x-shader/x-vertex">
			precision mediump float;

			attribute vec2 a_position;
			attribute vec2 a_texCoord;
			
			varying vec2 v_fragTexCoord;

			//uniform vec2 u_rotation;

			void main() {
				v_fragTexCoord = a_texCoord;
				gl_Position = vec4(a_position*vec2(1, 1), 0, 1);//vec4(vec2(a_position.x * u_rotation.y + a_position.y * u_rotation.x, a_position.y * u_rotation.y - a_position.x * u_rotation.x), 0, 1);
			}
		</script>
		<script id="fragment" type="x-shader/x-fragment">
			precision mediump float;

			//uniform vec4 u_color;

			varying vec2 v_fragTexCoord;

			uniform sampler2D samplerCoin;
			uniform sampler2D samplerGem;
	
			void main() {
				gl_FragColor = texture2D(samplerCoin, v_fragTexCoord) * texture2D(samplerGem, v_fragTexCoord);
			}
		</script>
	</body>
	<script>
		const canvas = document.getElementById("canvas");
		canvas.width = innerWidth;
		canvas.height = innerHeight;
		//const ctx = canvas.getContext("2d");

		const darkness = document.getElementById("darkness");
		darkness.width = innerWidth;
		darkness.height = innerHeight;
		const darknessCtx = darkness.getContext("2d");
		
		document.getElementById("canvas-wrapper").focus();

		var blockSize = 50 * 2;
		var canvasWidth = canvas.width / blockSize * 2;
		var canvasHeight = canvas.height / blockSize * 2;

		class WebGLRenderer {
			constructor() {
				this.gl = canvas.getContext("webgl");

				// init
				this.gl.viewport(0, 0, canvas.width, canvas.height);
				this.gl.clearColor(0, 0, 0, 1);
				this.gl.clear(this.gl.COLOR_BUFFER_BIT);
				this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, true);
			
				// get shader code
				this.vertexCode = document.getElementById("vertex").firstChild.nodeValue;
				this.fragmentCode = document.getElementById("fragment").firstChild.nodeValue;

				// create shaders and program
				this.vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER);
				this.gl.shaderSource(this.vertexShader, this.vertexCode);
				this.gl.compileShader(this.vertexShader);
				
				this.fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);
				this.gl.shaderSource(this.fragmentShader, this.fragmentCode);
				this.gl.compileShader(this.fragmentShader);

				this.program = this.gl.createProgram();
				this.gl.attachShader(this.program, this.vertexShader);
				this.gl.attachShader(this.program, this.fragmentShader);
				this.gl.linkProgram(this.program);

				// errors
				if (!this.gl.getShaderParameter(this.vertexShader, this.gl.COMPILE_STATUS)) console.log(this.gl.getShaderInfoLog(this.vertexShader));
				if (!this.gl.getShaderParameter(this.fragmentShader, this.gl.COMPILE_STATUS)) console.log(this.gl.getShaderInfoLog(this.fragmentShader));
				if (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) console.log(this.gl.getProgramInfoLog(this.program));
				this.gl.validateProgram(this.program);
				if (!this.gl.getProgramParameter(this.program, this.gl.VALIDATE_STATUS)) console.log(this.gl.getProgramInfoLog(this.program));
			};

			draw(vertices) {
				this.gl.clear(this.gl.COLOR_BUFFER_BIT);

				// vertices
				var vertices = this.getVertices();
				var triangleVertexBufferObject = this.gl.createBuffer();
				this.gl.bindBuffer(this.gl.ARRAY_BUFFER, triangleVertexBufferObject);
				this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(vertices), this.gl.STATIC_DRAW);

				// variables
				//var u_rotationLoc = this.gl.getUniformLocation(this.program, "u_rotation");
				var a_positionLoc = this.gl.getAttribLocation(this.program, "a_position");
				var a_texCoordLoc = this.gl.getAttribLocation(this.program, "a_texCoord");
				var samplerCoinLocation = gl.getUniformLocation(program, "samplerCoin");
				var samplerGemLocation = gl.getUniformLocation(program, "samplerGem");
				//let angle = Math.atan2(Math.round(playerXV * 1000) / 1000, -Math.round(playerYV * 1000) / 1000);
				//this.gl.uniform2fv(u_rotationLoc, [Math.sin(angle), Math.cos(angle)]);

				this.gl.vertexAttribPointer(
					a_positionLoc,
					2,
					this.gl.FLOAT,
					this.gl.FALSE,
					4 * Float32Array.BYTES_PER_ELEMENT,
					0
				);
				this.gl.vertexAttribPointer(
					a_texCoordLoc,
					2,
					this.gl.FLOAT,
					this.gl.FALSE,
					4 * Float32Array.BYTES_PER_ELEMENT,
					2 * Float32Array.BYTES_PER_ELEMENT
				);
				this.gl.enableVertexAttribArray(a_positionLoc);
				this.gl.enableVertexAttribArray(a_texCoordLoc);

				//textures
				var coinTexture = this.gl.createTexture();
				var gemTexture = this.gl.createTexture();
				
				this.gl.activeTexture(this.gl.TEXTURE0);
				this.gl.bindTexture(this.gl.TEXTURE_2D, coinTexture);
				this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, images.coin.image);
				
				this.gl.activeTexture(this.gl.TEXTURE1);
				this.gl.bindTexture(this.gl.TEXTURE_2D, gemTexture);
				this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, images.gem.image);

				this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.REPEAT);
				this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.REPEAT);
				this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);
				this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);

				// draw stuff
				this.gl.useProgram(this.program);
				this.gl.drawArrays(this.gl.TRIANGLES, 0, vertices.length / 4);
			};
			getVertices() {
				let squares = [];

				// sky
				squares.push([-canvasWidth / 2, -canvasHeight / 2, canvasWidth, canvasHeight, cameraX / (canvasWidth * 3), cameraY / (canvasHeight * 3), 1, 1, ...images.skyDay.RGB]);

				// level
				let rowBuffer = range(Math.floor(cameraX - canvasWidth / 2), Math.floor(cameraX + canvasWidth / 2));//Object.keys(level.rows).map(it => parseInt(it)).filter(it => it + 1 > cameraX - width / 2 && it < cameraX + width / 2);
				for (let i = 0; i < rowBuffer.length; i++) {
					//rows
					let squareX = rowBuffer[i] - cameraX;
					let rowY = (rowBuffer[i] >= 0 && rowBuffer[i] < level.rows.length) ? level.rows[rowBuffer[i]] : Math.round(getPerlinHeight(rowBuffer[i]));
					let squareY = (rowY - cameraY); // level.rows[rowBuffer[i]]
					squareY = Math.min(squareY, (squareY % 1) + Math.ceil(canvasHeight / 2));
					if (squareY > -canvasHeight / 2) {
						let scale = 5;
						squares.push([squareX, -canvasHeight / 2, rowBuffer[i] - cameraX - squareX + 1, squareY + canvasHeight / 2, rowBuffer[i] / scale, (cameraY - 0.15) / scale, 1 / scale, (squareY + canvasHeight / 2) / scale, ...layers[getLayer(Math.round(getPerlinHeight(rowBuffer[i])))][0].RGB]);
					};
					//features
					switch (level.features[rowBuffer[i]]) {
						case 0:
							break;
						case 1: // x y w h r g b
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.coin.RGB]);
							break;
						case 2:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.gem.RGB]);
							break;
						case 3:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 4, 0, 0, 1, 1, ...images.ladder.RGB]);
							break;
						case 4:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 6, 0, 0, 1, 1, ...images.ladder.RGB]);
							break;
						case 5:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 5, 0, 0, 1, 1, ...images.stones.RGB]);
							break;
						case 6:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.mysteryCrate.RGB]);
							break;
						case 7:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 3, 0, 0, 1, 1, ...images.sentryBarracks.RGB]);
							break;
						case 8:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 3, 0, 0, 1, 1, ...images.sentryBarracks.RGB]);
							break;
						case 9:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY - 0.5, 1, 0.5, 0, 0, 1, 1, ...images.pitfall.RGB]);
							break;
						case 10:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.dybbukBox.RGB]);
							break;
						case 11:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.dybbukBoxOpen.RGB]);
							break;
						case 12:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.totem.RGB]);
							break;
						case 13:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.fourLeafClover.RGB]);
							break;
						case 14:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.potOfGold.RGB]);
							break;
						case 15:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.burlapSack.RGB]);
							break;
						case 16:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 4, 0, 0, 1, 1, ...images.ruinedObelisk.RGB]);
							break;
						case 17:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 2, 0, 0, 1, 1, ...images.timeMachine.RGB]);
							break;
						case 18:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.trampoline.RGB]);
							break;
						default:
							squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, 0, 0, 1, 1, ...images.error.RGB]);
					};
					let featureEntity = level.featureEntities[rowBuffer[i]];
					if (featureEntity) {
						switch (featureEntity.type) {
							case "obelisk":
								squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 4 + featureEntity.yOffset, 1]);
								break;
							case "scaffolding":
								squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, featureEntity.height, 1]);
								break;
							default:
								squares.push([rowBuffer[i] - cameraX, level.rows[rowBuffer[i]] - cameraY, 1, 1, images.error, 1]);
						};
					};
				};

				// player
				squares.push([playerX - 0.5 - cameraX, playerY - cameraY, 1, 2, 0, 0, 1, 2, ...images.guy.RGB]);
				return this.vertexArray(squares);
			};
			vertexArray(array) {
				let newArray = []; // x,y,w,h,uvx,uvy,uvw,uvh
				for (let i = 0; i < array.length; i++) {
					newArray[i] = array[i].map((it, i) => (i % 2 === 0) ? (it * blockSize) / canvas.width : (it * blockSize) / canvas.height);
					//newArray[i].splice(4, 3);
					//let r = array[i][4];
					//let g = array[i][5];
					//let b = array[i][6];
					let x = array[i][0];
					let y = array[i][1];
					let width = array[i][2];
					let height = array[i][3];
					let uvX = array[i][4] ?? 0;
					let uvY = array[i][5] ?? 0;
					let uvWidth = array[i][6] ?? 1;
					let uvHeight = array[i][7] ?? 1;
					newArray[i] = [
						newArray[i][0], newArray[i][1] + newArray[i][3],					uvX + 0,		uvY + uvHeight,
						newArray[i][0], newArray[i][1],										uvX + 0,		uvY + 0,
						newArray[i][0] + newArray[i][2], newArray[i][1],					uvX + uvWidth,	uvY + 0,
						newArray[i][0], newArray[i][1] + newArray[i][3],					uvX + 0,		uvY + uvHeight,
						newArray[i][0] + newArray[i][2], newArray[i][1] + newArray[i][3],	uvX + uvWidth,	uvY + uvHeight,
						newArray[i][0] + newArray[i][2], newArray[i][1],					uvX + uvWidth,	uvY + 0
					];
				};
				return newArray.flat();
			};
		};
		const renderer = new WebGLRenderer();
		class Tree {
			constructor() {
				this
			};
		};

		var keysDown = [];
		function isDown(key) {
			return keysDown[key] ?? false;
		};
		class CanvasImage {
			constructor(color, src) {
				this.image = new Image();
				//this.image.crossOrigin = "anonymous";
				this.width = 500;
				this.height = 500;
				this.url = src;
				this.loaded = false;
				this.color = color;
				this.image.onload = (image) => {
					this.loaded = true;
					this.width = this.image.width;
					this.height = this.image.height;
					imagesLoaded++;
				};
				this.image.src = src;
			};
			draw(sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) {
				if (this.image.src !== this.url) {
					this.image.src = this.url;
				};
				ctx.fillStyle = this.color ?? "rgb(255, 0, 255)";
				if (arguments.length === 2) {
					if (this.loaded) {
						ctx.drawImage(this.image, arguments[0], arguments[1]);
					} else {
						ctx.fillRect(arguments[0], arguments[1], blockSize, blockSize);
					};
				} else if (arguments.length === 4) {
					if (this.loaded) {
						ctx.drawImage(this.image, arguments[0], arguments[1], arguments[2], arguments[3]);
					} else {
						ctx.fillRect(arguments[0], arguments[1], arguments[2], arguments[3]);
					};
				} else if (arguments.length === 8) {
					if (this.loaded) {
						ctx.drawImage(this.image, arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5], arguments[6], arguments[7]);
					} else {
						ctx.fillRect(arguments[4], arguments[5], arguments[6], arguments[7]);
					};
				} else {
					throw new TypeError("image draw 2 4 or 8 things");
				};
			};
			get RGB() {
				return [this.color[0] / 255, this.color[1] / 255, this.color[2] / 255];
			};
			get imageDisplay() {
				return this.loaded ? this.image : new ImageData(new Uint8ClampedArray([255, 255, 255, 255], 1, 1));
			};
		};
		class Joystick {
			constructor(element) {
				this.angle = 0;
				this.strength = 0;
				this.isMouseDown = false;
				this.element = element;
			};
			mouseMove(e) {
				if (!shop) {
					if (e.touches) {
						e = e.touches[0];
					};
					let coords = this.coordinates(e.clientX, e.clientY);
					let rect = this.element.getBoundingClientRect();
					let xy = this.coordinates(rect.x, rect.y);
					if (this.isMouseDown) {
						this.angle = Math.atan2(coords[0], coords[1]) * 180 / Math.PI;
						this.strength = clamp(Math.sqrt((coords[0] - (xy[0] + rect.width / 2)) ** 2 + (coords[1] - (xy[1] + rect.height / 2)) ** 2) / 100, 0, 1);
					};
					this.updateCircle();
				};
			};
			mouseUp(e) {
				if (!shop) {
					if (e.touches) {
						e = e.touches[0];
					};
					this.isMouseDown = false;
					this.angle = 0;
					this.strength = 0;
					this.updateCircle();
				};
			};
			mouseDown(e) {
				if (!shop) {
					if (e.touches) {
						e = e.touches[0];
					};
					this.isMouseDown = true;
					this.mouseMove(e);
				};
			};
			coordinates(x, y) {
				let rect = this.element.getBoundingClientRect();
				return [x - (rect.x + rect.width / 2), y - (rect.y + rect.height / 2)];
			};
			updateCircle() {
				document.getElementById("circle-thing").style.transform = "translate(" + (Math.sin(this.angle * Math.PI / 180) * this.strength * 100) + "px, " + (Math.cos(this.angle * Math.PI / 180) * this.strength * 100) + "px)";
			};
		};
		Math.mod = function(a, b) {
			return ((a % b) + b) % b;
		};
		Array.prototype.random = function() {
			return this[Math.floor(Math.random() * this.length)];
		};
		Array.prototype.mean = function() {
			return this.reduce((a, b) => a + b, 0) / this.length;
		};

		var playerX = 1.5;
		var playerY = 0;
		var playerXV = 0;
		var playerYV = 0;
		var cameraX = playerX - (canvas.width / 2);
		var cameraY = (playerY + 1) - (canvas.height / 2);
		var onGround = false;
		var seeds = [];
		var imagesLoaded = 0;
		var bob = new Image();
		bob.src = "data:image/png;base64,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";
		var images = {
			guy: new CanvasImage([228.6, 227.6, 231.7, 1.0], "data:image/png;base64,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"),
			skyDay: new CanvasImage([108.5, 179.9, 219.2, 1.0], "https://media.hswstatic.com/eyJidWNrZXQiOiJjb250ZW50Lmhzd3N0YXRpYy5jb20iLCJrZXkiOiJnaWZcL3doeS1pcy1za3ktYmx1ZS5qcGciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjgyOH19fQ=="),
			grass: new CanvasImage([69.7, 160.9, 32.1, 1.0], "https://images.pexels.com/photos/413195/pexels-photo-413195.jpeg?cs=srgb&dl=pexels-pixmike-413195.jpg&fm=jpg"),
			hills: new CanvasImage([112.5, 142.0, 137.8, 1.0], "https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Chocolate_Hills_overview.JPG/1200px-Chocolate_Hills_overview.JPG"),
			ice: new CanvasImage([177.9, 211.1, 237.4, 1.0], "https://media.istockphoto.com/id/466513257/photo/image-of-light-blue-ice-design.jpg?s=612x612&w=0&k=20&c=tkgdD6LDAjjDL-J_OCc2tkN924FLtjvgSeQWgVBY5-Y="),
			snow: new CanvasImage([223.6, 225.6, 230.8, 1.0], "https://t4.ftcdn.net/jpg/00/73/39/95/360_F_73399559_6z3WIVyR5fPvXAW96ZFG1RBHsz6qVn4R.jpg"),
			dirt: new CanvasImage([139.8, 131.3, 97.7, 1.0], "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Dirt.JPG/640px-Dirt.JPG"),
			stones: new CanvasImage([172.3, 174.2, 173.4, 1.0], "https://d3mvlb3hz2g78.cloudfront.net/wp-content/uploads/2016/01/thumb_720_450_f_28.jpg"),
			stone: new CanvasImage([143.3, 143.6, 140.3, 1.0], "https://media.istockphoto.com/photos/light-grey-black-slate-stone-background-or-texture-picture-id1164746310?b=1&k=20&m=1164746310&s=612x612&w=0&h=nj0fWpCXBGNXhcUuWhXIF3HmcZiXMagkQ-DyPHAXLiw="),
			darkStone: new CanvasImage([54.0, 54.0, 54.0, 1.0], "https://media.istockphoto.com/id/1136387527/photo/black-gray-grunge-background-dirty-concrete-wall-stucco-vintage-rock-texture-ombre-dark-stone.jpg?b=1&s=170667a&w=0&k=20&c=iUFh6s42MVX40KVd7bmkfcPHtMjYvqNsVndFQ2dMFWY="),
			stoneBackground: new CanvasImage([104.7, 112.2, 111.4, 1.0], "https://img.freepik.com/premium-photo/cave-wall-background_181627-531.jpg?w=2000"),
			packedSnow: new CanvasImage([164.8, 165.6, 168.3, 1.0], "https://thumbs.dreamstime.com/b/snow-surface-full-frame-background-texture-pattern-14970280.jpg"),
			magma: new CanvasImage([118.9, 34.5, 10.1, 1.0], "https://media.wired.co.uk/photos/606da0c989f3babb1f0133fb/master/w_1600%2Cc_limit/Lava.jpg"),
			lava: new CanvasImage([225.2, 94.0, 17.8, 1.0], "https://3docean.img.customer.envatousercontent.com/files/371574722/Image+Preview.jpg?auto=compress%2Cformat&fit=crop&crop=top&w=590&h=590&s=dc0fcc220b7f9d9b06eedf277f6f0844"),
			coin: new CanvasImage([148.7, 129.3, 82.1, 1.0], "data:image/png;base64,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"),
			gem: new CanvasImage([199.9, 200.3, 200.2, 1.0], "data:image/png;base64,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"),
			mysteryCrate: new CanvasImage([221.7, 197.2, 179.5, 1.0], "https://thumbs.dreamstime.com/b/crate-question-10722232.jpg"),
			ladder: new CanvasImage([245.3, 236.3, 234.0, 1.0], "https://m.media-amazon.com/images/I/71l4pWDxfTL.jpg"),
			guyJumping: new CanvasImage([216.4, 215.0, 214.7, 1.0], "https://thumbs.dreamstime.com/b/young-businessman-jumping-excitement-full-length-shot-isolated-white-background-156089211.jpg"),
			guyRunning: new CanvasImage([229.0, 227.1, 228.6, 1.0], "https://d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX3059374.jpg"),
			guyClimbingLadder: new CanvasImage([203.7, 204.7, 206.9, 1.0], "https://thumbs.dreamstime.com/b/businessman-climbing-ladder-8490148.jpg"),
			guyFalling: new CanvasImage([231.1, 230.3, 230.8, 1.0], "https://media.istockphoto.com/id/1297454782/photo/businessman-falling-down-isolated.jpg?s=612x612&w=0&k=20&c=UwgYtYVhktnHcYOHovzWOD3oZT1JNrguZcl5cQCKEGw="),
			guyDead: new CanvasImage([187.2, 184.1, 182.8, 1.0], "https://as1.ftcdn.net/v2/jpg/00/47/51/36/1000_F_47513651_NvfOZ1VY0YQwXriVuQKDCE6XLueitq57.jpg"),
			guyFlying: new CanvasImage([228.2, 229.3, 231.5, 1.0], "https://thumbs.dreamstime.com/b/flying-businessman-happy-high-isolated-white-37045715.jpg"),
			sentry: new CanvasImage([21.9, 21.9, 21.9, 1.0], "https://forums.rpgmakerweb.com/data/attachments/182/182633-4abbd801946b4603beb05c7c7c9e81a2.jpg"),
			sentryBarracks: new CanvasImage([112.9, 98.6, 65.5, 1.0], "https://images.fineartamerica.com/images/artworkimages/mediumlarge/2/abandoned-shack-in-woods-douglas-barnett.jpg"),
			pitfall: new CanvasImage([119.1, 106.6, 85.9, 1.0], "https://content.instructables.com/FJL/5NV5/FV4LSDNT/FJL5NV5FV4LSDNT.jpg?auto=webp&fit=bounds&frame=1"),
			skyNight: new CanvasImage([38.5, 48.1, 86.1, 1.0], "https://images.unsplash.com/photo-1528818955841-a7f1425131b5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8c3RhcnJ5JTIwc2t5fGVufDB8fDB8fA%3D%3D&w=1000&q=80"),
			moon: new CanvasImage([126.6, 133.3, 147.5, 1.0], "https://bigthink.com/wp-content/uploads/2020/10/origin-26.jpg"),
			ironNickelAlloy: new CanvasImage([76.6, 76.6, 76.6, 1.0], "https://cdn.openpr.com/R/b/Rb1218790_g.jpg"),
			mimic: new CanvasImage([86.2, 86.2, 86.2, 1.0], "https://www.halloweenforum.com/attachments/large-jpg.524714/"),
			error: new CanvasImage([235.8, 214.6, 214.3, 1.0], "https://proofthatblog.com/wp-content/uploads/2013/06/question-mark.jpg"),
			dybbuk: new CanvasImage([246.2, 240.7, 236.6, 1.0], "https://m.media-amazon.com/images/I/71lrPEdwT3L.jpg"),
			dybbukBox: new CanvasImage([44.7, 21.9, 14.6, 1.0], "https://travel.home.sndimg.com/content/dam/images/travel/fullrights/2016/03/29/0/TPOS101H_215929_761477.1304868.jpg.rend.hgtvcom.616.462.suffix/1491593805712.jpeg"),
			dybbukBoxOpen: new CanvasImage([76.0, 52.9, 44.3, 1.0], "https://i0.wp.com/bloody-disgusting.com/wp-content/uploads/2012/04/dybbuk-box.jpg"),
			golem: new CanvasImage([142.7, 136.5, 136.5, 1.0], "https://upload.wikimedia.org/wikipedia/commons/9/9f/Prague-golem-reproduction.jpg"),
			russetGolem: new CanvasImage([161.0, 151.3, 143.4, 1.0], "https://i.etsystatic.com/25674007/r/il/edaabf/2662111538/il_570xN.2662111538_kdmy.jpg"),
			totem: new CanvasImage([217.3, 210.0, 207.6, 1.0], "https://m.media-amazon.com/images/I/41yYu0ji5GL._AC_SX466_.jpg"),
			obelisk: new CanvasImage([34.7, 42.8, 61.8, 1.0], "https://cdnb.artstation.com/p/assets/images/images/029/560/119/large/julia-eriksson-rezle-juliaerikssonpillar.jpg?1597936831"),
			mars: new CanvasImage([164.8, 117.0, 73.9, 1.0], "https://assets.newatlas.com/dims4/default/a1ac999/2147483647/strip/true/crop/1920x1080+0+0/resize/1920x1080!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Farchive%2Fmars-rivers-2.jpg"),
			jupiter: new CanvasImage([185.0, 131.2, 68.2, 1.0], "https://thumbs.dreamstime.com/b/texture-surface-jupiter-elements-image-furnished-nasa-152406745.jpg"),
			fourLeafClover: new CanvasImage([134.9, 171.3, 60.1, 1.0], "https://iadsb.tmgrup.com.tr/1b9d78/1200/627/0/133/1800/1074?u=https://idsb.tmgrup.com.tr/2019/06/30/superstitions-busted-four-leaf-clover-1561926823637.jpg"),
			leprechaun: new CanvasImage([177.2, 180.0, 168.8, 1.0], "https://upload.wikimedia.org/wikipedia/commons/0/0b/Leprechaun_ill_artlibre_jnl.png"),
			rainbow: new CanvasImage([57.0, 46.8, 35.4, 0.4624016885783112], "https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Rainbow_Circle.svg/2040px-Rainbow_Circle.svg.png"),
			potOfGold: new CanvasImage([127.7, 147.6, 118.9, 1.0], "https://cdn5.vectorstock.com/i/1000x1000/74/44/green-full-pot-with-gold-coins-pot-with-four-leaf-vector-19727444.jpg"),
			aquaGolem: new CanvasImage([196.7, 202.1, 209.5, 1.0], "https://m.media-amazon.com/images/I/51o2o3s46sL._AC_UF894,1000_QL80_.jpg"),
			grimReaper: new CanvasImage([181.0, 180.4, 180.5, 1.0], "https://m.media-amazon.com/images/I/617-+DaGNBL._AC_SL1500_.jpg"),
			blood: new CanvasImage([13.8, 1.0, 1.0, 0.25157178200808133], "https://cdn140.picsart.com/301576808315211.png"),
			burlapSack: new CanvasImage([199.5, 184.7, 167.9, 1.0], "https://m.media-amazon.com/images/I/510LO2c-5gL._AC_.jpg"),
			mechaGolem: new CanvasImage([154.0, 150.8, 159.3, 1.0], "https://www.guinnessworldrecords.com/Images/largest-humanoid-vehicle_tcm25-589034.jpg"),
			ruinedObelisk: new CanvasImage([146.7, 146.4, 123.0, 1.0], "https://c8.alamy.com/comp/EAXY7G/a-viking-rune-stone-is-seen-in-the-swedish-countryside-outside-of-EAXY7G.jpg"),
			saturn: new CanvasImage([207.7, 192.7, 162.7, 1.0], "https://www.solarsystemscope.com/textures/download/2k_saturn.jpg"),
			uranus: new CanvasImage([141.7, 191.4, 207.3, 1.0], "https://planet-texture-maps.fandom.com/wiki/Special:FilePath/Dh_uranus_texture.png"),
			neptune: new CanvasImage([54.0, 79.4, 167.8, 1.0], "https://www.solarsystemscope.com/textures/download/2k_neptune.jpg"),
			water: new CanvasImage([35.4, 119.1, 158.4, 1.0], "https://images.unsplash.com/photo-1476897017502-219c9169bd6f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8M3x8d2F0ZXIlMjB0ZXh0dXJlfGVufDB8fDB8fA%3D%3D&w=1000&q=80"),
			venus: new CanvasImage([196.7, 112.6, 39.8, 1.0], "https://www.solarsystemscope.com/textures/download/2k_venus_surface.jpg"),
			mercury: new CanvasImage([132.4, 131.6, 131.5, 1.0], "https://www.solarsystemscope.com/textures/download/2k_mercury.jpg"),
			sun: new CanvasImage([241.8, 136.0, 40.0, 1.0], "https://www.solarsystemscope.com/textures/download/2k_sun.jpg"),
			mountain: new CanvasImage([103.1, 112.6, 125.2, 1.0], "https://upload.wikimedia.org/wikipedia/commons/e/e7/Everest_North_Face_toward_Base_Camp_Tibet_Luca_Galuzzi_2006.jpg"),
			scaffolding: new CanvasImage([238.5, 239.2, 240.5, 1.0], "https://m.media-amazon.com/images/I/61+Fb8M51bL.jpg"),
			celestialGolem: new CanvasImage([85.2, 71.4, 72.5, 1.0], "https://storage.googleapis.com/dream-machines-output/9d39f43b-4c34-4b78-b2d1-a86da1519af1/0_0.png"),
			tree1: new CanvasImage([172.9, 189.9, 171.8, 1.0], "https://www.fertilome.com/media/klowrey/Article%20Images/Tree.jpg"),
			timeMachine: new CanvasImage([136.7, 126.5, 116.7, 1.0], "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTOqUVsOlm_9mRkhKgQMEA62c7AqQ8_5PPQqw&usqp=CAU"),
			trampoline: new CanvasImage([217.5, 220.5, 228.0, 1.0], "https://www.flaghouse.com/productImages/image.axd/i.4540/w.1000/h.1000/xm.0/FlagHouse+Jogging+Trampoline_XL.jpg")
		};
		var layers = {
			"-13": [images.sun, 0.07, -0.03],
			"-12": [images.mercury, 0.35, -0.012],
			"-11": [images.venus, 0.3, -0.01],
			"-10": [images.ice, 0.03, -0.012],
			"-9": [images.mountain, 0.1, -0.012],
			"-8": [images.stone, 0.35, -0.012],
			"-7": [images.grass, 0.35, -0.012],
			"-6": [images.dirt, 0.2, -0.012],
			"-5": [images.stones, 0.25, -0.012],
			"-4": [images.stone, 0.3, -0.012],
			"-3": [images.darkStone, 0.35, -0.012],
			"-2": [images.magma, 0.23, -0.012],
			"-1": [images.lava, 0.1, -0.012],
			"0": [images.ironNickelAlloy, 0.14, -0.012],
			"1": [images.lava, 0.1, -0.012],
			"2": [images.magma, 0.23, -0.012],
			"3": [images.darkStone, 0.35, -0.012],
			"4": [images.stone, 0.3, -0.012],
			"5": [images.stones, 0.25, -0.012],
			"6": [images.dirt, 0.2, -0.012],
			"7": [images.grass, 0.35, -0.012],
			"8": [images.stone, 0.35, -0.012],
			"9": [images.snow, 0.12, -0.012],
			"10": [images.ice, 0.03, -0.012],
			"11": [images.moon, 0.3, -0.007],
			"12": [images.mars, 0.25, -0.009],
			"13": [images.jupiter, 0.07, -0.0175],
			"14": [images.saturn, 0.07, -0.016],
			"15": [images.uranus, 0.07, -0.013],
			"16": [images.neptune, 0.07, -0.014]
		};
		var level = {
			rows: [],
			originalRows: [],
			features: [],
			octaves: [],
			mobs: [],
			featureEntities: [],
			terrainFeatures: [],
			waterLevel: [],
			golems: [],
			perlinOffset: 0,
			labels: []
		};
		var coins = 0;
		var gems = 0;
		var totems = 0;
		var fac = 
			"Marina silva is a brazilian politician and an activist for deforestation and other things. She was a rubber tapper and found that land was being invaded by rubber tappers and she started protecting thousands of hectares of land."
		;
		var facasd = false;
		var shop = false;
		var bootses = {
			"sketchers": {bought: true, cost: 0},
			"tennis rackets": {bought: false, cost: 30},
			"running shoes": {bought: false, cost: 60},
			"spring boots": {bought: false, cost: 90},
			"spike boots": {bought: false, cost: 100},
			"feather boots": {bought: false, cost: 120},
			"stepping boots": {bought: false, cost: 150},
			"magnet boots": {bought: false, cost: 170}
		};
		var foods = {
			"government meal": {cost: 1, hunger: 0.01, howmany: 0},
			"apple": {cost: 5, hunger: 0.1, howmany: 0},
			"bread": {cost: 10, hunger: 0.2, howmany: 0},
			"burger": {cost: 14, hunger: 0.3, howmany: 0},
			"cold meal": {cost: 19, hunger: 0.4, howmany: 0},
			"meal": {cost: 23, hunger: 0.5, howmany: 0},
			"warm meal": {cost: 27, hunger: 0.6, howmany: 0},
			"hot meal": {cost: 31, hunger: 0.7, howmany: 0},
			"crispy gooey homemade mac and cheese": {cost: 34, hunger: 0.8, howmany: 0},
			"cow brain": {cost: 38, hunger: 0.9, howmany: 0},
			"filling warm meal": {cost: 41, hunger: 1, howmany: 0},

			"buckwheat pancake": {cost: 47, hunger: 1.2, howmany: 0},
			"sopping meal": {cost: 52, hunger: 1.4, howmany: 0},
			"emptying cold meal": {cost: 56, hunger: -0.8, howmany: 0},
			"piping hot meal": {cost: 59, hunger: 1.8, howmany: 0},
			"styrofoam tupperware baggy full of a reheated rehydrated piping hot filling sloppy sopping warm meal portion": {cost: 62, hunger: 2, howmany: 0}
		};
		var potions = {
			"night vision potion": {cost: 1, time: 0, duration: 30, howmany: 0},
			"speed potion": {cost: 2, time: 0, duration: 10, howmany: 0},
			"jumping potion": {cost: 3, time: 0, duration: 10, howmany: 0},
			"regeneration potion": {cost: 5, time: 0, duration: 10, howmany: 0},
			"spider potion": {cost: 7, time: 0, duration: 10, howmany: 0},
			"levitation potion": {cost: 8, time: 0, duration: 10, howmany: 0},
			"anti gravity potion": {cost: 10, time: 0, duration: 10, howmany: 0},
			"bird potion": {cost: 12, time: 0, duration: 10, howmany: 0}
		};
		var boots = "sketchers";
		var health = 1;
		var dead = false;
		var ladders = 0;
		var inLadder = false;
		var inLadderSpeed = 0.1;
		var joystick = new Joystick(document.getElementById("joystick"));
		var controls = {
			up: false,
			down: false,
			left: false,
			right: false
		};
		var tallLadders = 0;
		var score = 0;
		var frameCount = 0;
		var fps = 0;
		var fpsUpdateTime = 0;
		var flying = false;
		var pb = 0;
		var notification = "";
		var notificationTime = 0;
		var gameTime = 0;
		var developerMode = true;
		var macro = [];
		var macroTime = 0;
		var macroPlaying = false;
		var dybbukTime = 0;
		var crouching = false;
		var obeliskShop = false;
		var basePlayerSpeed = 0.2;
		var baseJumpHeight = 0.24;
		var maxHealth = 1;
		var resizeGroundUV = true;
		var inWater = false;
		var golems = {
			"golem": {
				width: 1,
				height: 3,
				riseSpeed: 0.01,
				sinkSpeed: -0.01,
				image: images.golem,
				spawnOffset: 35
			},
			"russet golem": {
				width: 1,
				height: 6,
				riseSpeed: 0.008,
				sinkSpeed: -0.01,
				image: images.russetGolem,
				spawnOffset: 35
			},
			"aqua golem": {
				width: 1,
				height: 9,
				riseSpeed: 0.005,
				sinkSpeed: -0.005,
				image: images.aquaGolem,
				spawnOffset: 35
			},
			"mecha golem": {
				width: 1,
				height: 12,
				riseSpeed: 0.01,
				sinkSpeed: -0.01,
				image: images.mechaGolem,
				spawnOffset: 35
			},
			"celestial golem": {
				width: 1,
				height: 100,
				riseSpeed: 1,
				sinkSpeed: -1,
				image: images.celestialGolem,
				spawnOffset: 35
			}
		};
		var hackerConsole = false;
		var baseStepHeight = 0.5;
		var oxygen = 1;
		var playing = false;
		var timeTraveling = false;
		var trampolines = 0;
		var divingSuit = true;

		for (let i = 0; i < 25; i++) {
			level.octaves.push(perlinNoise1D());
		};
		function getPerlinHeight(x) {
			let perlinHeight = 0;
			for (let j = 0; j < level.octaves.length; j++) {
				let amplitude = 1400;
				let wavelength = 4700;
				perlinHeight += ((perlinGetVal(level.octaves[j], (x + level.perlinOffset) / (wavelength / (2 ** j))) - 0.5) * 2 * amplitude) / (2 ** j);
			};
			return perlinHeight;
		};
		var tempRows = [];
		for (let i = 0; i < 50000; i++) {
			tempRows[i] = getPerlinHeight(i);
		};
		level.perlinOffset = parseInt(Object.keys(tempRows).sort((a, b) => Math.abs(tempRows[a] - 750) - Math.abs(tempRows[b] - 750))[0]);
		function generateLevel() {
			let oldLength = level.rows.length;//rows.length === 0 ? -1 : rows.length;
			for (let i = oldLength; i < oldLength + 5000; i++) {
				level.rows[i] = level.originalRows[i] = getPerlinHeight(i);// + (level.rows[i - 1] ?? 0);
				level.featureEntities[i] = null;
				level.golems[i] = null;
			};

			// round stuff and coins n gems
			for (let i = oldLength; i < oldLength + 5000; i++) {// 0-air 1-coin 2-gem 3-ladder 4-tallladder 5-wall 6-mysterycrate 7-sentrybarracks 8-sentrybarracksnosentry 9-pitfall 10-dybbukbox 11-dybbukboxopen 12-totem 13-fourleafclover 14-potofgold 15-burlapsack 16-ruinedobelisk 17-timemachine 18-trampoline
				level.waterLevel[i] = 0;
				level.labels[i] = "0";
				if (i === 300000000) {
					let trenchDepth = 100;
					let trenchWidth = 19;
					for (let j = -trenchWidth; j <= trenchWidth; j++) {
						if (i + j < level.rows.length && i + j >= 0) {
							let heightOffset = trenchDepth * (Math.sin((Math.PI / trenchWidth) * j + 1.5 * Math.PI) / 2 - 0.5);
							level.labels[i + j] = Math.random();
							level.rows[i + j] += heightOffset;
							level.waterLevel[i + j] = -heightOffset;
							//alert((i + j) + " " + heightOffset);
						};
					};
					//level.waterLevel[i] = (trenchDepth * (trenchWidth * 2 + 1)) / 2;
				};
				level.rows[i] = Math.round(level.rows[i]);
				let pool = [];
				if (Math.random() < 1 / 20) pool.push(1);
				if (Math.random() < 1 / 200) pool.push(2);
				if (Math.random() < 1 / 5000) pool.push(5);
				if (Math.random() < 1 / 1000) pool.push(6);
				if (Math.random() < 1 / 4000) pool.push(7);
				if (Math.random() < 1 / 2000) pool.push(10);
				if (Math.random() < 1 / 8000) pool.push(12);
				if (Math.random() < 1 / 25000) pool.push(13);
				if (Math.random() < 1 / 4000) pool.push(15);
				if (Math.random() < 1 / 20000) pool.push(16);
				if (Math.random() < 1 / 20.000) pool.push(17);
				if (Math.random() < 1 / 70 && new Set([level.rows[i - 2], level.rows[i - 1], level.rows[i], Math.round(level.rows[i + 1]), Math.round(level.rows[i + 2])]).size === 1) pool.push(9);
				level.features[i] = pool.length === 0 ? 0 : pool[Math.floor(Math.random() * pool.length)];

				if (Math.random() < 1 / 3000) {
					placeGolem("golem", i, false);
				};
				if (Math.random() < 1 / 8000) {
					placeGolem("russet golem", i, false);
				};
				if (Math.random() < 1 / 10000) {
					placeGolem("aqua golem", i, false);
				};
				if (Math.random() < 1 / 15000) {
					placeGolem("mecha golem", i, false);
				};
				if (Math.random() < 1 / 50000) {
					placeGolem("celestial golem", i, false);
				};

				if (Math.random() < 1 / 5000) {
					spawnMob("mimic", i + 0.5 + (Math.random() - 0.5) * 1.5, level.rows[i] + (Math.random() - 0.5) * 1.5);
				};
				if (Math.random() < 1 / 3000) {
					level.terrainFeatures[i] = "tree1";
				};
				if (Math.random() < 1 / 4212133121320.00) {
					level.terrainFeatures[i] = "rainbow";
				};
			};
			level.originalRows = [...level.rows];
		};
		generateLevel();
		playerY = level.rows[1];
		function getHittableRows(x) {
			hittableRows = [];
			if (Math.mod(x, 1) < 0.5) {
				hittableRows.push(Math.floor(x) - 1);
			};
			hittableRows.push(Math.floor(x));
			if (Math.mod(x, 1) > 0.5) {
				hittableRows.push(Math.floor(x) + 1);
			};
			return hittableRows;
		};
		function clamp(number, min, max) {
			return Math.min(Math.max(number, min), max);
		};
		function getLayer(y) {
			return clamp(Math.floor(y / 100), Math.min(...Object.keys(layers)), Math.max(...Object.keys(layers)));
		};
		function lerp(a, b, c) {
			return a * (1 - c) + b * c;
		};
		function inverseLerp(a, b, c) {
			return c / (b - a) + a;
		};

		function perlinNoise1D() {
			let MAX_VERTICES = 1024;
			let r = [];
			for (let i = 0; i < MAX_VERTICES; ++i) {
				r.push(Math.random());
			};
			return {MAX_VERTICES, r};
		};
		function perlinGetVal(generator, x) {
			let t = x - Math.floor(x);
			let tRemapSmoothstep = t ** 2 * (3 - 2 * t);
			let xMin = Math.floor(x) & (generator.MAX_VERTICES - 1);
			let xMax = (xMin + 1) & (generator.MAX_VERTICES - 1);
			return lerp(generator.r[xMin], generator.r[xMax], tRemapSmoothstep);
		};
		function mulberry32(a) {
			let t = a += 0x6D2B79F5;
			t = Math.imul(t ^ t >>> 15, t | 1);
			t ^= t + Math.imul(t ^ t >>> 7, t | 61);
			return ((t ^ t >>> 14) >>> 0) / 4294967296;
		};
		function shopButton() {
			if (shop = !shop) {
				document.getElementById("shop").style.display = "block";
			} else {
				document.getElementById("shop").style.display = "none";
				document.getElementById("canvas-wrapper").focus();
			};
		};
		function obeliskShopButton() {
			if (obeliskShop = !obeliskShop) {
				document.getElementById("obelisk-shop").style.display = "block";
			} else {
				document.getElementById("obelisk-shop").style.display = "none";
				document.getElementById("canvas-wrapper").focus();
			};
		};
		function clickShoeButton(button, bootsreal) {
			if (bootses[bootsreal].bought) {
				boots = bootsreal;
			} else {
				if (coins >= bootses[bootsreal].cost) {
					bootses[bootsreal].bought = true;
					coins -= bootses[bootsreal].cost;
				} else {
					alert("bankrupt");
				};
			};
		};
		function purchaseFood(food) {
			if (coins >= foods[food].cost) {
				foods[food].howmany++;
				coins -= foods[food].cost;
			} else {
				alert("bankrupt");
			};
		};
		function devourFood(food) {
			if (foods[food].howmany >= 1) {
				foods[food].howmany--;
				health += foods[food].hunger;
				health = clamp(health, 0, maxHealth);
			};
		};
		function keyDownFunction(e) {
			if (e.repeat) return;
			keysDown[e.key] = true;
			if (e.key === "t") {
				facasd = true;
				setTimeout(() => {
					facasd = false;
				}, 3000);
			} else if (e.key === "l" && developerMode) {
				level.rows = JSON.parse(prompt("what level rows"));
			} else if (e.key === "r" && developerMode) {
				playerXV = 0;
				playerYV = 0;
				playerX = 1.5;
				playerY = level.rows[1] ?? 0;
				gameTime = 0;
			} else if (e.key === "m" && developerMode) {
				macro = prompt("what macro").split(",");
				macroTime = 0;
				macroPlaying = false;
			} else if (e.key === "p" && developerMode) {
				spawnMob(prompt("what mob"), playerX - 3, level.rows[Math.floor(playerX - 3)] ?? 0);
			} else if (e.key === "e") {
				let ruinedObeliskRows = getHittableRows(playerX).filter(it => level.features[it] === 16);
				if (ruinedObeliskRows.length > 0) {
					if (totems >= 1) {
						totems--;
						level.features[ruinedObeliskRows[0]] = 0;
						placeFeatureEntity("obelisk", ruinedObeliskRows[0], false);
					} else {
						alert("bankrupt");
					};
				};
				let timeMachineRows = getHittableRows(playerX).filter(it => level.features[it] === 17);
				if (timeMachineRows.length > 0) {
					if (gems >= 100) {
						gems -= 100;
						timeTraveling = true;
					} else {
						alert("bankrupt");
					};
				};
			};
		};
		function purchaseLadder() {
			if (coins >= 10) {
				coins -= 10;
				ladders++;
			} else {
				alert("bankrupt");
			};
		};
		function placeLadder() {
			if (ladders >= 1 && level.features[Math.floor(playerX)] === 0) {
				level.features[Math.floor(playerX)] = 3;
				ladders--;
			};
		};
		function purchaseTallLadder() {
			if (coins >= 25) {
				coins -= 25;
				tallLadders++;
			} else {
				alert("bankrupt");
			};
		};
		function placeTallLadder() {
			if (tallLadders >= 1 && level.features[Math.floor(playerX)] === 0) {
				level.features[Math.floor(playerX)] = 4;
				tallLadders--;
			};
		};
		function brewPotion(potion) {
			if (gems >= potions[potion].cost) {
				potions[potion].howmany++;
				gems -= potions[potion].cost;
			} else {
				alert("bankrupt");
			};
		};
		function chugPotion(potion) {
			if (potions[potion].howmany >= 1) {
				potions[potion].howmany--;
				potions[potion].time += potions[potion].duration;
			};
		};
		function saveSlot(slot) {
			let saveCode = JSON.stringify({
				level,
				playerX,
				playerY,
				playerXV,
				playerYV,
				coins,
				gems,
				ladders,
				tallLadders,
				health,
				dead,
				bootses,
				boots,
				foods,
				potions,
				pb,
				gameTime,
				totems,
				dybbukTime,
				basePlayerSpeed,
				baseJumpHeight,
				maxHealth,
				score,
				baseStepHeight,
				oxygen,
				trampolines
			});
			localStorage.setItem("forestSimulator3DSaveSlot" + slot, saveCode);
		};
		function loadSlot(slot) {
			let saveCode = localStorage.getItem("forestSimulator3DSaveSlot" + slot);
			if (saveCode === null) {
				alert("save slot " + slot + " empty, to create a new save slot reload and press save in the new one you want to create")
			} else {
				saveCode = JSON.parse(saveCode);
				level = saveCode.level ?? level;
				playerX = saveCode.playerX ?? playerX;
				playerY = saveCode.playerY ?? playerY;
				playerXV = saveCode.playerYV ?? playerXV;
				coins = saveCode.coins ?? coins;
				gems = saveCode.gems ?? gems;
				ladders = saveCode.ladders ?? ladders;
				tallLadders = saveCode.tallLadders ?? tallLadders;
				health = saveCode.health ?? health;
				dead = saveCode.dead ?? dead;
				bootses = saveCode.bootses ?? bootses;
				boots = saveCode.boots ?? boots;
				foods = saveCode.foods ?? foods;
				potions = saveCode.potions ?? potions;
				pb = saveCode.pb ?? pb;
				gameTime = saveCode.gameTime ?? gameTime;
				totems = saveCode.totems ?? totems;
				dybbukTime = saveCode.dybbukTime ?? dybbukTime;
				basePlayerSpeed = saveCode.basePlayerSpeed ?? basePlayerSpeed;
				baseJumpHeight = saveCode.baseJumpHeight ?? baseJumpHeight;
				maxHealth = saveCode.maxHealth ?? maxHealth;
				score = saveCode.score ?? score;
				baseStepHeight = saveCode.baseStepHeight ?? baseStepHeight;
				oxygen = saveCode.oxygen ?? oxygen;
				trampolines = saveCode.trampolines ?? trampolines;
			};
		};
		function clearSlot(slot) {
			localStorage.removeItem("forestSimulator3DSaveSlot" + slot);
		};
		function clearAllSlots() {
			localStorage.clear();
		};
		function spawnMob(type, x, y) {
			let mob = {
				type: type,
				x: x,
				y: y,
				age: 0
			};
			if (type === "mimic") {
				mob.mimicTarget = ["coin", "gem"].random();
				mob.mimicTimer = false;
				mob.mimicking = true;
				mob.mimicSpawnAge = 0;
			};
			level.mobs.push(mob);
		};
		function notificate(message) {
			notification = message;
			notificationTime = 180;
		};
		function placeFeatureEntity(type, x) {
			let featureEntity = {
				"type": type
			};
			if (type === "obelisk") {
				featureEntity.yOffset = arguments[2] ? -4 : 0;
				featureEntity.riseSpeed = arguments[2] ? 0.005 : 0;
			} else if (type === "scaffolding") {
				featureEntity.height = arguments[2];
			};
			level.featureEntities[Math.floor(x)] = featureEntity;
		};
		function placeGolem(type, x, rising) {
			let golem = {
				"type": type,
				"yOffset": rising ? -golems[type].height : 0,
				"ySpeed": rising ? golems[type].riseSpeed : 0
			};
			level.golems[Math.floor(x)] = golem;
		};
		function obeliskShopUpgradeButton(item) {
			if (totems >= 1) {
				switch (item) {
					case "health":
						if (maxHealth < 2) {
							maxHealth = Math.min(maxHealth + 0.1, 2);
						} else {
							alert("upgrade maxed");
						};
						break;
					case "speed":
						if (basePlayerSpeed < 0.35) {
							basePlayerSpeed = Math.min(basePlayerSpeed + 0.02, 0.35);
						} else {
							alert("upgrade maxed");
						};
						break;
					case "jump":
						if (baseJumpHeight < 0.5) {
							baseJumpHeight = Math.min(baseJumpHeight + 0.03, 0.5);
						} else {
							alert("upgrade maxed");
						};
						break;
					case "step":
						if (baseStepHeight < 1.1) {
							baseStepHeight = Math.min(baseStepHeight + 0.1, 1.1);
						} else {
							alert("upgrade maxed");
						};
				};
				totems--;
			} else {
				alert("bankrupt");
			};
		};
		function openHackerConsole() {
			hackerConsole = !hackerConsole;
			document.getElementById("hacker-console").style.display = hackerConsole ? "block" : "none";
			if (!hackerConsole) {
				document.getElementById("canvas-wrapper").focus();
			};
		};
		function purchaseScaffolding() {
			let height = Math.round(parseInt(prompt("what height (1 coin/block)")));
			if (height > 0) {
				if (coins >= height) {
					placeFeatureEntity("scaffolding", playerX, height);
					coins -= height;
				} else {
					alert("bankrupt");
				};
			};
		};
		function playButton() {
			document.getElementById("menu").style.display = "none";
			document.getElementById("canvas-wrapper").focus();
			playing = true;
		};
		function purchaseTrampoline() {
			if (coins >= 45) {
				coins -= 45;
				trampolines++;
			} else {
				alert("bankrupt");
			};
		};
		function placeTrampoline() {
			if (trampolines >= 1 && level.features[Math.floor(playerX)] === 0) {
				level.features[Math.floor(playerX)] = 18;
				trampolines--;
			};
		};
		function range(start, end) {
			var array = [];
			if (end - start > 25000000) {
				console.error("range too large (" + (end - start) + ")");
				return array;
			};
			for (let i = start; i <= end; i++) {
				array.push(i);
			};
			return array;
		};

		function tick() {
			document.getElementById("joystick").style.display = document.getElementById("joystick-checkbox").checked ? "flex" : "none";
			controls.up = isDown("ArrowUp") || isDown("w") || (joystick.strength > 0.5 && (joystick.angle > 112.5 || joystick.angle < -112.5)) || (macroPlaying && parseInt(macro[macroTime][0]));
			controls.down = isDown("ArrowDown") || isDown("s") || (joystick.strength > 0.5 && (joystick.angle > -67.5 && joystick.angle < 67.5)) || (macroPlaying && parseInt(macro[macroTime][1]));
			controls.left = isDown("ArrowLeft") || isDown("a") || (joystick.strength > 0.5 && (joystick.angle > -157.5 && joystick.angle < -22.5)) || (macroPlaying && parseInt(macro[macroTime][2]));
			controls.right = isDown("ArrowRight") || isDown("d") || (joystick.strength > 0.5 && (joystick.angle > 22.5 && joystick.angle < 157.5)) || (macroPlaying && parseInt(macro[macroTime][3]));
			if (macroPlaying) {
				macroTime++;
			};
			if (macroTime >= macro.length) {
				//macroPlaying = false;
				macroTime = 0;
			};
			if (!shop && !dead && !obeliskShop && playing) {
				if (playerX >= level.rows.length) { // playerx >=
					generateLevel();
				};

				let bakedRows = [...level.rows];
				for (let i = 0; i < bakedRows.length; i++) {
					bakedRows[i] += (level.features[i] === 5) * 5;
					if (level.golems[i] && level.golems[i].type === "golem") {
						let height = level.golems[i].yOffset + 3;
						bakedRows[i] = level.rows[i] + height;
					} else if (level.golems[i] && level.golems[i].type === "russet golem") {
						let height = level.golems[i].yOffset + 6;
						bakedRows[i] = level.rows[i]+ height;
					} else if (level.golems[i] && level.golems[i].type === "aqua golem") {
						let height = level.golems[i].yOffset + 9;
						bakedRows[i] = level.rows[i] + height;
					} else if (level.golems[i] && level.golems[i].type === "mecha golem") {
						let height = level.golems[i].yOffset + 12;
						bakedRows[i - 1] = level.rows[i] + height;
						bakedRows[i] = level.rows[i] + height;
						bakedRows[i + 1] = level.rows[i] + height;
					} else if (level.golems[i] && level.golems[i].type === "celestial golem") {
						let height = level.golems[i].yOffset + 100;
						bakedRows[i] = level.rows[i] + height;
					} else if (level.features[i] === 18) {
						bakedRows[i] = level.rows[i] + 1;
					};
				};

				gameTime += 1 / 60;

				for (let potion in potions) {
					potions[potion].time = Math.max(potions[potion].time - (1 / 60), 0);
				};
				flying = potions["bird potion"].time > 0;
				inWater = playerY < bakedRows[Math.floor(playerX)] + level.waterLevel[Math.floor(playerX)] && level.waterLevel[Math.floor(playerX)] > 0.75;

				// X MOVEMENT //
				
				let playerSpeed = basePlayerSpeed + (boots === "running shoes") * 0.04 + (potions["speed potion"].time > 0) * 0.1;
				let groundFriction = (boots === "spike boots") ? 0.9 : layers[getLayer(playerY)][1];
				if (controls.right !== controls.left) {
					//move
					let sign = controls.right - controls.left;
					let maxXV = (inLadder ? sign * (boots === "magnet boots" ? 0 : inLadderSpeed) : (flying ? (sign * basePlayerSpeed * 1.5) : (sign * playerSpeed)));
					playerXV = lerp(maxXV, playerXV, onGround ? 1 - groundFriction : 0.15) + (sign * 0.04 * (controls.up && onGround && !inWater));
				} else {
					//friction
					playerXV *= inLadder ? 0 : (onGround ? 1 - groundFriction : 0.99);
				};

				if (inWater) {
					playerXV *= 0.9;
					playerXV = clamp(playerXV, -0.3, 0.3);
				};
				let hittableRows = getHittableRows(playerX + playerXV);
				let max = hittableRows.reduce((a, b) => bakedRows[a] > bakedRows[b] ? a : b);
				if ((hittableRows[0] !== undefined && bakedRows[hittableRows[0]] > playerY) || (hittableRows[1] !== undefined && bakedRows[hittableRows[1]] > playerY)) {
					if (onGround && playerY >= bakedRows[max] - ((boots === "stepping boots") ? baseStepHeight * 2 : baseStepHeight) && potions["spider potion"].time <= 0) {
						playerY = bakedRows[max];
					} else {
						playerXV = Math.ceil(playerX + (playerXV / 2)) - 0.5 - playerX;
						if (potions["spider potion"].time > 0) {
							playerYV = 0;
							playerY += 0.2;
						};
					};
				};
				hittableRows = getHittableRows(playerX + playerXV);
				max = hittableRows.reduce((a, b) => bakedRows[a] > bakedRows[b] ? a : b);
				let trampoline = level.features[max] === 18 && playerY + playerYV <= bakedRows[max];
				if (trampoline) {
					playerXV *= 0.2;
				};
				playerX += playerXV;
				
				// Y MOVEMENT //

				if (inLadder) {
					playerYV = (controls.up - controls.down) * (boots === "magnet boots" ? 0 : inLadderSpeed);
				} else if (flying) {
					if (controls.up !== controls.down) {
						playerYV = (controls.up - controls.down) * basePlayerSpeed * 1.5;
					};
					playerYV *= 0.99;
				} else if (!trampoline) {
					let jumpHeight = baseJumpHeight + (boots === "spring boots") * 0.06 + (potions["jumping potion"].time > 0) * 0.08;
					playerYV += controls.up * onGround * !inWater * (jumpHeight + Math.abs(playerXV) * 0.15);
				};

				//gravity
				let layer = getLayer(playerY);
				let gravity = layers[layer][2];
				if (layer === 0 && boots === "magnet boots") {
					gravity -= 0.012;
				};
				if (inWater) {
					if (controls.up === controls.down) {
						gravity = -0.001;
					} else {
						if (controls.up) {
							gravity = 0.01;
						} else if (controls.down) {
							gravity = -0.01;
						};
					};
				};
				playerYV = potions["levitation potion"].time > 0 ? 0.1 : (playerYV + ((inLadder || flying) ? 0 : gravity * ((potions["anti gravity potion"].time > 0) ? 0.5 : 1)));

				if (boots === "feather boots") {
					playerYV = Math.max(playerYV, -0.3);
				};
				if (inWater) {
					playerYV *= 0.98;
					playerYV = clamp(playerYV, -0.3, 0.3);
				};
				hittableRows = getHittableRows(playerX);
				max = hittableRows.reduce((a, b) => bakedRows[a] > bakedRows[b] ? a : b);
				let oldOnGround = onGround;
				onGround = playerY + playerYV <= bakedRows[max];
				if (!oldOnGround && onGround && playerYV <= -0.6) {
					health -= playerYV * -0.05;
				};
				trampoline = level.features[max] === 18 && onGround;
				if (onGround && !trampoline) {
					if (getLayer(level.rows[max]) === 9 && level.rows[max] - 900 > (level.originalRows[max] - 900) * 0.9 && boots !== "tennis rackets") {
						level.rows[max] -= 0.005;
						if (level.rows[max] - 200 < (level.originalRows[max] - 200) * 0.9) {
							level.rows[max] = (level.originalRows[max] - 200) * 0.9 + 200;
						};
					};
					playerY = bakedRows[max];
					playerYV = 0;
				} else if (trampoline) {
					playerY = level.rows[max] + 1;
					playerYV *= -1;
				};
				playerY += playerYV;

				// ROW LOOP //

				let oldInLadder = inLadder;
				inLadder = false;
				dybbukTime = Math.max(0, dybbukTime - 1);
				document.getElementById("obelisk-shop-button").style.display = "none";
				// water
				let totalWaterHeight = x => level.waterLevel[x] + bakedRows[x];
				let waterTick = function(x){
					let waterLeft = bakedRows[x - 1] < totalWaterHeight(x);
					let waterRight = bakedRows[x + 1] < totalWaterHeight(x);
					let averageHeight = (totalWaterHeight(x - 1) * waterLeft + totalWaterHeight(x) + totalWaterHeight(x + 1) * waterRight) / (1 + waterLeft + waterRight);
					if (waterLeft) level.waterLevel[x - 1] = averageHeight - bakedRows[x - 1];
					level.waterLevel[x] = averageHeight - bakedRows[x];
					if (waterRight) level.waterLevel[x + 1] = averageHeight - bakedRows[x + 1];
				};
				for (let i = 0; i < level.rows.length; i++) {
					if (i >= 1 && i < bakedRows.length - 1 && level.waterLevel[i] > 0) {
						//waterTick(i);
					};
				};
				for (let i = level.rows.length - 1; i <= 0; i--) {
					if (i >= 1 && i < bakedRows.length - 1 && level.waterLevel[i] > 0) {
						//waterTick(i);
					};
				};
				for (let i = 0; i < level.rows.length; i++) {
					// features
					if (playerX + 0.5 > i && playerX - 0.5 < i + 1) {
						if (playerY < level.rows[i] + 1) {
							switch (level.features[i]) {
								case 2:
									if (dybbukTime <= 0) {
										gems++;
									};
									level.features[i] = 0;
									break;
								case 6:
									if (dybbukTime <= 0) {
										let crateOption = ["food", "potion", "ladder", "coins", "gems", "nothing"].random();
										let specific = null;
										switch (crateOption) {
											case "food":
												specific = Object.keys(foods).random();
												foods[specific].howmany++;
												break;
											case "potion":
												specific = Object.keys(potions).random();
												potions[specific].howmany++;
												break;
											case "ladder":
												specific = ["ladder", "tall ladder"].random();
												switch (specific) {
													case "ladder":
														ladders++;
														break;
													case "tall ladder":
														tallLadders++;
												};
												break;
											case "coins":
												specific = Math.floor(Math.random() * 19 + 1);
												coins += specific;
												break;
											case "gems":
												specific = Math.floor(Math.random() * 3 + 1);
												gems += specific;
												break;
											case "nothing":
												if (Math.random() < 1/100) {
													specific = "spawned 1000 sentries";
													for (let i = 0; i < 1000; i++) {
														spawnMob("sentry", Math.random() * level.rows.length, 0);
													};
												} else {
													specific = "get better";
												};
										};
										notificate("mystery crate opened! item: " + crateOption + " (" + specific + ")");
									};
									level.features[i] = 0;
									break;
								case 10:
									dybbukTime = 1200;
									level.features[i] = 11;
									break;
								case 12:
									if (dybbukTime <= 0) {
										totems++;
									};
									level.features[i] = 0;
									break;
								case 13:
									spawnMob("leprechaun", i + 2.5, bakedRows[i]);
									level.features[i] = 0;
									break;
								case 14:
									let coinAmount = Math.round(Math.random() * 50 + 50);
									coins += coinAmount;
									notificate("pot of gold contains " + coinAmount + " coins");
									level.features[i] = 0;
									break;
								case 15:
									if (dybbukTime <= 0) {
										let food = Object.keys(foods).random();
										foods[food].howmany++;
										notificate("burlap sack contains " + food);
									};
									level.features[i] = 0;
									break;
							};
						};
						if (level.features[i] === 1 && (boots === "magnet boots" || playerY < level.rows[i] + 1)) {
							if (dybbukTime <= 0) {
								coins++;
							};
							level.features[i] = 0;
						};
						if ((playerY < level.rows[i] + 4 && level.features[i] === 3) || (playerY < bakedRows[i] + 6 && level.features[i] === 4)) {
							inLadder = true;
							inLadderSpeed = 0.1;
						};
						if (level.featureEntities[i] && playerY < bakedRows[i] + level.featureEntities[i].height) {
							inLadder = true;
							inLadderSpeed = 0.02 / level.featureEntities[i].height;
						};
						if (inLadder && !oldInLadder) {
							playerXV = 0;
							playerYV = 0;
						};
						if (playerY < level.rows[i] + 3 && level.features[i] === 7) {
							if (dybbukTime <= 0) {
								spawnMob("sentry", i + 0.5, bakedRows[i + 1]);
							};
							level.features[i] = 8;
						};
						if (onGround && playerY === level.rows[i] && boots !== "tennis rackets" && level.features[i] === 9) {
							level.rows[i - 1] = level.rows[i] = level.rows[i + 1] = level.rows[i] - 4;
							level.features[i - 1] = 0;
							level.features[i] = 0;
							level.features[i + 1] = 0;
							onGround = false;
						};
						if (playerY < level.rows[i] + 4 && level.features[i] === 16) {
							notificate("press e to repair obelisk (1 totem)");
						};
						if (playerY < level.rows[i] + 2 && level.features[i] === 17) {
							notificate("press e to time travel (100 gems)");
						};
					};
					// feature entities
					if (level.featureEntities[i]) {
						switch (level.featureEntities[i].type) {
							case "obelisk":
								level.featureEntities[i].yOffset += level.featureEntities[i].riseSpeed;
								if (level.featureEntities[i].yOffset > 0) {
									level.featureEntities[i].riseSpeed = 0;
									level.featureEntities[i].yOffset = 0;
								} else if (level.featureEntities[i].yOffset <= -4) {
									level.featureEntities[i] = null;
									continue;
								};
								if (i + 1 > playerX - 0.5 && i < playerX + 0.5 && playerY < level.rows[i] + 4 && level.featureEntities[i].riseSpeed === 0) {
									document.getElementById("obelisk-shop-button").style.display = "block";
								};
								break;
						};
					};
					if (level.golems[i]) {
						let spawnOffset;
						let golemType = level.golems[i].type;
						/*switch (level.golems[i].type) {
							case "golem":*/
								spawnOffset = 35;
								if (i + 1 > playerX - 0.5 && i < playerX + 0.5 && playerY <= level.rows[i] + golems[golemType].height && onGround && level.golems[i].ySpeed === 0 && level.golems[i + spawnOffset] === null && boots !== "tennis rackets") {
									level.golems[i].ySpeed = golems[golemType].sinkSpeed;
									placeGolem("golem", i + spawnOffset, true);
								};
								level.golems[i].yOffset += level.golems[i].ySpeed;
								if (level.golems[i].yOffset > 0) {
									level.golems[i].ySpeed = 0;
									level.golems[i].yOffset = 0;
								} else if (level.golems[i].yOffset <= -golems[golemType].height) {
									level.golems[i] = null;
									continue;
								};/*
								break;
							case "russet golem":
								spawnOffset = 100;
								if (i + 1 > playerX - 0.5 && i < playerX + 0.5 && playerY <= level.rows[i] + 6 && onGround && level.golems[i].riseSpeed === 0 && level.golems[i + spawnOffset] === null && boots !== "tennis rackets") {
									level.golems[i].riseSpeed = -0.01;
									placeFeatureEntity("russet golem", i + spawnOffset, true);
									if (level.golems[i + Math.floor(spawnOffset / 2)] === null)  {
										placeFeatureEntity("golem", i + Math.floor(spawnOffset / 2), true);
									};
								};
								level.golems[i].yOffset += level.golems[i].riseSpeed;
								if (level.golems[i].yOffset > 0) {
									level.golems[i].riseSpeed = 0;
									level.golems[i].yOffset = 0;
								} else if (level.golems[i].yOffset <= -6) {
									level.golems[i] = null;
									continue;
								};
								break;
							case "aqua golem":
								spawnOffset = 10;
								if (i + 1 > playerX - 0.5 && i < playerX + 0.5 && playerY <= level.rows[i] + 9 && onGround && level.golems[i].riseSpeed === 0 && level.golems[i + spawnOffset] === null && boots !== "tennis rackets") {
									level.golems[i].riseSpeed = -0.005;
									placeFeatureEntity("aqua golem", i + spawnOffset, true);
									if (level.golems[i + Math.floor(spawnOffset * (1 / 3))] === null)  {
										placeFeatureEntity("russet golem", i + Math.floor(spawnOffset * (1 / 3)), true);
									};
									if (level.golems[i + Math.floor(spawnOffset * (2 / 3))] === null)  {
										placeFeatureEntity("golem", i + Math.floor(spawnOffset * (2 / 3)), true);
									};
								};
								level.golems[i].yOffset += level.golems[i].riseSpeed;
								if (level.golems[i].yOffset > 0) {
									level.golems[i].riseSpeed = 0;
									level.golems[i].yOffset = 0;
								} else if (level.golems[i].yOffset <= -9) {
									level.golems[i] = null;
									continue;
								};
								break;
							case "mecha golem":
								spawnOffset = 10;
								if (i + 2 > playerX - 0.5 && i - 1 < playerX + 0.5 && playerY <= level.rows[i] + 12 && onGround && level.golems[i].riseSpeed === 0 && level.golems[i + spawnOffset] === null && boots !== "tennis rackets") {
									level.golems[i].riseSpeed = -0.01;
									placeFeatureEntity("mecha golem", i + spawnOffset, true);
									if (level.golems[i + Math.floor(spawnOffset * (1 / 4))] === null)  {
										placeFeatureEntity("aqua golem", i + Math.floor(spawnOffset * (1 / 4)), true);
									};
									if (level.golems[i + Math.floor(spawnOffset * (2 / 4))] === null)  {
										placeFeatureEntity("russet golem", i + Math.floor(spawnOffset * (2 / 4)), true);
									};
									if (level.golems[i + Math.floor(spawnOffset * (3 / 4))] === null)  {
										placeFeatureEntity("golem", i + Math.floor(spawnOffset * (3 / 4)), true);
									};
								};
								level.golems[i].yOffset += level.golems[i].riseSpeed;
								if (level.golems[i].yOffset > 0) {
									level.golems[i].riseSpeed = 0;
									level.golems[i].yOffset = 0;
								} else if (level.golems[i].yOffset <= -12) {
									level.golems[i] = null;
									continue;
								};
								break;
						};*/
					};
				};

				for (let mob of level.mobs) {
					switch (mob.type) {
						case "sentry":
							if (mob.age >= 120) {
								let xSign = Math.sign(playerX - mob.x)
								mob.x += xSign * 0.06;
								if (xSign !== Math.sign(playerX - mob.x)) {
									mob.x = playerX;
								};
								let sentryStepHeight = bakedRows[getHittableRows(mob.x).reduce((a, b) => bakedRows[a] > bakedRows[b] ? a : b)] ?? mob.y;
								if (sentryStepHeight - mob.y <= 3) {
									mob.y = sentryStepHeight;
								} else {
									mob.x = Math.ceil(mob.x) - 0.5;
								};
								if (mob.x + 0.5 > playerX - 0.5 && mob.x - 0.5 < playerX + 0.5 && playerY < mob.y + 4 && playerY + 2 > mob.y) {
									health -= 0.01;
								};
								for (let collisionMob of level.mobs) {
									if (mob.x + 0.5 > collisionMob.x - 0.5 && mob.x - 0.5 < collisionMob.x + 0.5 && collisionMob.y < mob.y + 4 && collisionMob.y + 4 > mob.y && collisionMob.type === "mimic" && !collisionMob.mimicking) {
										placeFeatureEntity("obelisk", Math.floor((mob.x + collisionMob.x) / 2), true);
										level.mobs.splice(level.mobs.indexOf(mob));
										level.mobs.splice(level.mobs.indexOf(collisionMob));
									};
								};
							};
							break;
						case "mimic":
							if (!mob.mimicking) {
								mob.x = (mob.x > playerX ? Math.min : Math.max)(mob.x, mob.x + playerXV);
								mob.y = bakedRows[getHittableRows(mob.x).reduce((a, b) => bakedRows[a] > bakedRows[b] ? a : b)] ?? mob.y;
								if (mob.x + 0.5 > playerX - 0.5 && mob.x - 0.5 < playerX + 0.5 && playerY < mob.y + 4 && playerY + 2 > mob.y) {
									health -= 0.01;
								};
							} else if (mob.x + 0.5 > playerX - 0.5 && mob.x - 0.5 < playerX + 0.5 && playerY < mob.y + 1 && playerY + 2 > mob.y && dybbukTime <= 0) {
								mob.mimicTimer = true;
							};
							if (mob.mimicTimer) {
								mob.mimicSpawnAge++;
								mob.mimicking = (mob.mimicSpawnAge < 120);
							};
							if (mob.mimicSpawnAge - 120 >= 1800) {
								if (level.features[Math.floor(mob.x)] === 0) {
									level.features[Math.floor(mob.x)] = {"coin": 1, "gem": 2}[mob.mimicTarget];
								};
								level.mobs.splice(level.mobs.indexOf(mob));
							};
							break;
						case "leprechaun":
							mob.x += 0.15//(playerX - 1.5) / (gameTime * 60);
							mob.y = bakedRows[getHittableRows(mob.x).reduce((a, b) => bakedRows[a] > bakedRows[b] ? a : b)];
							if (mob.x + 0.5 > playerX - 0.5 && mob.x - 0.5 < playerX + 0.5 && playerY < mob.y + 1.5 && playerY + 2 > mob.y) {
								let rainbowSize = 100;
								level.terrainFeatures[Math.floor(mob.x - rainbowSize)] = "rainbow";
								level.features[Math.floor(mob.x - rainbowSize)] = 14;
								level.mobs.splice(level.mobs.indexOf(mob));
							};
					};
					mob.age++;
				};

				cameraX = lerp(cameraX, (playerX), 0.25);
				cameraY = lerp(cameraY, ((playerY + 1)), 0.25);
				score = Math.max(score, Math.floor(playerX));
				pb = Math.max(pb, score);

				health += potions["regeneration potion"].time > 0 ? 0.0008 : -0.00008;
				if (oxygen <= 0) {
					health -= 0.003;
				};
				health = clamp(health, 0, maxHealth);
				if (playerY + 1.5 < level.rows[Math.floor(playerX)] + level.waterLevel[Math.floor(playerX)] && !divingSuit) {
					oxygen -= 0.005;
				} else {
					oxygen += 0.005;
				};
				oxygen = clamp(oxygen, 0, 1);
				dead = health <= 0;
				notificationTime = Math.max(0, notificationTime - 1);


				// draw screen vv
			};
		};
		function drawScreen() {
			if (canvas.width !== innerWidth) {
				canvas.width = darkness.width = innerWidth;
			};
			if (canvas.height !== innerHeight) {
				canvas.height = darkness.height = innerHeight;
			};
			canvasWidth = canvas.width / blockSize * 2;
			canvasHeight = canvas.height / blockSize * 2;
			renderer.gl.viewport(0, 0, canvas.width, canvas.height);
			renderer.draw();

			/*ctx.clearRect(0, 0, canvas.width, canvas.height);
			darknessCtx.clearRect(0, 0, canvas.width, canvas.height);

			images[((gameTime % 600 < 300 && getLayer(playerY) < 11 && getLayer(playerY) > -11) ? "skyDay" : "skyNight")].draw(0, 0, canvas.width, canvas.height);
			
			if (cameraY > 750 * -blockSize) {
				images.stoneBackground.draw(Math.mod(-cameraX, canvas.width * 4) / 4,					Math.mod(-cameraY, canvas.height * 4) / 4,					canvas.width, canvas.height);
				images.stoneBackground.draw(Math.mod(-cameraX, canvas.width * 4) / 4 - canvas.width,	Math.mod(-cameraY, canvas.height * 4) / 4,					canvas.width, canvas.height);
				images.stoneBackground.draw(Math.mod(-cameraX, canvas.width * 4) / 4,					Math.mod(-cameraY, canvas.height * 4) / 4 - canvas.height,	canvas.width, canvas.height);
				images.stoneBackground.draw(Math.mod(-cameraX, canvas.width * 4) / 4 - canvas.width,	Math.mod(-cameraY, canvas.height * 4) / 4 - canvas.height,	canvas.width, canvas.height);
			};
			
			images.hills.draw(0, 200, images.hills.width, images.hills.height - 200, Math.mod(-cameraX, canvas.width * 4) / 4,					(750 * -blockSize - cameraY) / 4, canvas.width, canvas.height);
			images.hills.draw(0, 200, images.hills.width, images.hills.height - 200, Math.mod(-cameraX, canvas.width * 4) / 4 - canvas.width,	(750 * -blockSize - cameraY) / 4, canvas.width, canvas.height);

			for (let i = 0; i < level.terrainFeatures.length; i++) {
				if (level.terrainFeatures[i] === "rainbow") {
					let rainbowSize = 100;
					images.rainbow.draw(i * blockSize - cameraX, (level.rows[i] + rainbowSize / 2) * -blockSize - cameraY, blockSize * rainbowSize, blockSize * rainbowSize);
				} else if (level.terrainFeatures[i] === "tree1") {
					images.tree1.draw((i - 2.5) * blockSize - cameraX, (level.rows[i] + 10) * -blockSize - cameraY, blockSize * 4, blockSize * 10);
				};
			};

			// grass
			let rowBuffer = Object.keys(level.rows).filter(it => it * blockSize + blockSize > cameraX && it * blockSize < cameraX + canvas.width);
			for (let i = 0; i < rowBuffer.length; i++) {
				let layer = getLayer(level.rows[rowBuffer[i]]);
				let ice = (layer === 9) && Math.round((level.rows[rowBuffer[i]] - 900) * 1000) / 1000 <= Math.round((level.originalRows[rowBuffer[i]] - 900) * 0.9 * 1000) / 1000;
				let groundImage = ice ? images.packedSnow : layers[getLayer(level.rows[rowBuffer[i]])][0];
				let blockUVSize = groundImage.width / (25 * (resizeGroundUV ? (50 / blockSize) : 1));
				let rowY = level.rows[rowBuffer[i]] * -blockSize - cameraY;
				groundImage.draw((blockUVSize * rowBuffer[i]) % (Math.floor(groundImage.width / blockUVSize) * blockUVSize), 0, blockUVSize, groundImage.height, rowBuffer[i] * blockSize - cameraX, rowY, blockSize, blockSize * (groundImage.height / blockUVSize));

				let gradient = darknessCtx.createLinearGradient(0, rowY - level.waterLevel[rowBuffer[i]] * blockSize, 0, (rowY - level.waterLevel[rowBuffer[i]] * blockSize) + blockSize * 15);
				gradient.addColorStop(0, "rgba(0, 0, 0, 0)");
				gradient.addColorStop(1, "rgba(0, 0, 0, 1)");
				darknessCtx.fillStyle = gradient;
				darknessCtx.fillRect(rowBuffer[i] * blockSize - cameraX, rowY, blockSize, canvas.height - rowY)

				switch (level.features[rowBuffer[i]]) {
					case 0:
						break;
					case 1:
						images.coin.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 2:
						images.gem.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 3:
						images.ladder.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 4, blockSize, blockSize * 4);
						break;
					case 4:
						images.ladder.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 6, blockSize, blockSize * 6);
						break;
					case 5:
						images.stones.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 5, blockSize, blockSize * 5);
						break;
					case 6:
						images.mysteryCrate.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 7:
						images.sentryBarracks.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 3, blockSize, blockSize * 3);
						break;
					case 8:
						images.sentryBarracks.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 3, blockSize, blockSize * 3);
						break;
					case 9:
						images.pitfall.draw(rowBuffer[i] * blockSize - cameraX, rowY, blockSize, blockSize * 0.5);
						break;
					case 10:
						images.dybbukBox.draw(110, 75, 200, 250, rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 11:
						images.dybbukBoxOpen.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 12:
						images.totem.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 13:
						images.fourLeafClover.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 14:
						images.potOfGold.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 15:
						images.burlapSack.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					case 16:
						images.ruinedObelisk.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 4, blockSize, blockSize * 4);
						break;
					case 17:
						images.timeMachine.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 2, blockSize, blockSize * 2);
						break;
					case 18:
						images.trampoline.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
						break;
					default:
						images.error.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
				};
				let featureEntity = level.featureEntities[rowBuffer[i]];
				if (featureEntity) {
					switch (featureEntity.type) {
						case "obelisk":
							images.obelisk.draw(875, 50, 200, 730 - (featureEntity.yOffset * -blockSize * (730 / (blockSize * 4))), rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 4 - featureEntity.yOffset * blockSize, blockSize, blockSize * 4 - featureEntity.yOffset * -blockSize);
							break;
						case "scaffolding":
							images.scaffolding.draw(rowBuffer[i] * blockSize - cameraX, rowY - featureEntity.height * blockSize, blockSize, featureEntity.height * blockSize);
							break;
						default:
							images.error.draw(rowBuffer[i] * blockSize - cameraX, rowY - blockSize, blockSize, blockSize);
					};
				};
				let golem = level.golems[rowBuffer[i]];
				if (golem) {
					switch (golem.type) {
						case "golem":
							images.golem.draw(0, 0, 1670, 1837 - (golem.yOffset * -blockSize * (1830 / (blockSize * 3))), rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 3 - golem.yOffset * blockSize, blockSize, blockSize * 3 - golem.yOffset * -blockSize);
							break;
						case "russet golem":
							images.russetGolem.draw(0, 0, 570, 570 - (golem.yOffset * -blockSize * (570 / (blockSize * 6))), rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 6 - golem.yOffset * blockSize, blockSize, blockSize * 6 - golem.yOffset * -blockSize);
							break;
						case "aqua golem":
							images.aquaGolem.draw(200, 70, 450, 705 - (golem.yOffset * -blockSize * (705 / (blockSize * 9))), rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 9 - golem.yOffset * blockSize, blockSize, blockSize * 9 - golem.yOffset * -blockSize);
							break;
						case "mecha golem":
							images.mechaGolem.draw(300, 0, 350, 600 - (golem.yOffset * -blockSize * (600 / (blockSize * 12))), (rowBuffer[i] - 1) * blockSize - cameraX, rowY - blockSize * 12 - golem.yOffset * blockSize, blockSize * 3, blockSize * 12 - golem.yOffset * -blockSize);
							break;
						case "celestial golem":
							images.celestialGolem.draw(0, 0, 570, 570 - (golem.yOffset * -blockSize * (570 / (blockSize * 100))), rowBuffer[i] * blockSize - cameraX, rowY - blockSize * 100 - golem.yOffset * blockSize, blockSize, blockSize * 100 - golem.yOffset * -blockSize);
							break;
					};
				};
				ctx.fillStyle = "white";
				ctx.font = "15px arial";
				ctx.fillText(level.labels[rowBuffer[i]], rowBuffer[i] * blockSize - cameraX, canvas.height / 2);
			};
			
			let animatedGuyImage = dead ? "guyDead" : (inLadder ? "guyClimbingLadder" : (flying ? "guyFlying" : (onGround ? (Math.abs(playerXV) > 0.1 ? "guyRunning" : "guy") : (playerYV <= 0 ? "guyFalling" : "guyJumping"))));
			images[document.getElementById("animations-checkbox").checked ? animatedGuyImage : "guy"].draw(playerX * blockSize - blockSize / 2 - cameraX, playerY * -blockSize - blockSize * 2 - cameraY, blockSize, blockSize * 2);
			if (dybbukTime > 0) {
				ctx.globalAlpha = 0.5;
				images.dybbuk.draw(playerX * blockSize - blockSize / 2 - cameraX, playerY * -blockSize - blockSize * 2 - cameraY, blockSize, blockSize * 2);
				ctx.globalAlpha = 1;
			};
			let grimReaperX = lerp(playerX - 1, playerX - 100, health / maxHealth);
			images.grimReaper.draw((grimReaperX - 0.5) * blockSize - cameraX, (level.rows[getHittableRows(grimReaperX).reduce((a, b) => level.rows[a] > level.rows[b] ? a : b)] + 3) * -blockSize - cameraY, blockSize, blockSize * 3);

			for (let mob of level.mobs) {if (mob.x * blockSize + blockSize / 2 - cameraX > 0 && mob.x * blockSize - blockSize / 2 - cameraX < canvas.width) {
					switch (mob.type) {
						case "sentry":
							if (mob.age >= 120) {
								images.sentry.draw(mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize * 4 - cameraY, blockSize, blockSize * 4);
							};
							break;
						case "mimic":
							if (mob.mimicking) {
								switch (mob.mimicTarget) {
									case "coin":
										images.coin.draw(mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize - cameraY, blockSize, blockSize);
										break;
									case "gem":
										images.gem.draw(mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize - cameraY, blockSize, blockSize);
										break;
									default:
										images.error.draw(mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize - cameraY, blockSize, blockSize);
								};
							} else {
								switch (Math.sign(Math.round(playerXV * 1000) / 1000)) {
									case -1:
										images.mimic.draw(307, 87, 84, 193, mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize * 4 - cameraY, blockSize, blockSize * 4);
										break;
									case 0:
										images.mimic.draw(217, 91, 95, 198, mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize * 4 - cameraY, blockSize, blockSize * 4);
										break;
									case 1:
										images.mimic.draw(109, 91, 95, 198, mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize * 4 - cameraY, blockSize, blockSize * 4);
								};
							};
							break;
						case "leprechaun":
							images.leprechaun.draw(mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize * 1.5 - cameraY, blockSize, blockSize * 1.5);
							break;
						default:
							images.error.draw(mob.x * blockSize - blockSize / 2 - cameraX, mob.y * -blockSize - blockSize * 2 - cameraY, blockSize, blockSize * 2);
					};
				};
			};
			for (let i = 0; i < rowBuffer.length; i++) {
				let waterUVSize = images.water.width / (25 * (resizeGroundUV ? (50 / blockSize) : 1));
				if (level.waterLevel[rowBuffer[i]] > 0) {
					ctx.globalAlpha = 0.5;
					let waveOffset = Math.max(Math.sin(gameTime * 2 + rowBuffer[i] / 5) * 0.25, -level.waterLevel[rowBuffer[i]]);
					let waterY = (level.rows[rowBuffer[i]] + level.waterLevel[rowBuffer[i]] + waveOffset) * -blockSize - cameraY;
					images.water.draw((waterUVSize * rowBuffer[i]) % (Math.floor(images.water.width / waterUVSize) * waterUVSize), 0, waterUVSize, images.water.height, rowBuffer[i] * blockSize - cameraX, waterY, blockSize, (level.waterLevel[rowBuffer[i]] + waveOffset) * blockSize);
					ctx.globalAlpha = 1;

					let gradient = darknessCtx.createLinearGradient(0, waterY, 0, waterY + blockSize * 25);
					gradient.addColorStop(0, "rgba(0, 0, 0, 0)");
					gradient.addColorStop(1, "rgba(0, 0, 0, 1)");
					darknessCtx.fillStyle = gradient;
					darknessCtx.fillRect(rowBuffer[i] * blockSize - cameraX, waterY, blockSize, (level.waterLevel[rowBuffer[i]] + waveOffset) * blockSize);
				};
			};
			let darknessOpacity = (Math.max(Math.sin((gameTime - 300) / (300 / Math.PI)), 0) ** 2);
			darknessCtx.fillStyle = "rgba(0, " + (potions["night vision potion"].time > 0) * 255 + ", 0, " + ((potions["night vision potion"].time > 0) ? lerp(0.2, 0.6, darknessOpacity) : lerp(0, 0.95, darknessOpacity)) + ")";
			darknessCtx.fillRect(0, 0, canvas.width, canvas.height);

			if (timeTraveling) {
				ctx.fillStyle = "rgba(255, 255, 255, 0.5)";
				ctx.fillRect(0, (gameTime * 300) % canvas.height, canvas.width, 1);
				ctx.fillStyle = "black";
				ctx.fillRect(Math.random() * canvas.width, 0, 1, canvas.height);
				let howManyNoises = 500;
				let noiseBrightness = Math.random() * 255;
				ctx.fillStyle = "rgb(" + noiseBrightness + ", " + noiseBrightness + ", " + noiseBrightness + ")";
				for (let i = 0; i < howManyNoises; i++) {
					ctx.fillRect(Math.random() * canvas.width, Math.random() * canvas.height, Math.random() + 1, Math.random() + 1);
				};
			};

			ctx.globalAlpha = clamp(1 - (health / maxHealth) / 0.1, 0, 1);
			images.blood.draw(0, 0, canvas.width, canvas.height);
			ctx.globalAlpha = 1;

			darknessCtx.beginPath();
			let circleLightX = playerX * blockSize - cameraX;
			let circleLightY = (playerY + 1) * -blockSize - cameraY;
			let gradient = darknessCtx.createRadialGradient(circleLightX, circleLightY, 0, circleLightX, circleLightY, blockSize * 2);
			gradient.addColorStop(1, "rgba(0, 0, 0, 0)");
			gradient.addColorStop(0.5, "rgba(0, 0, 0, 0.5)");
			darknessCtx.fillStyle = gradient;
			darknessCtx.save();
			darknessCtx.arc(playerX * blockSize - cameraX, (playerY + 1) * -blockSize - cameraY, blockSize * 2, 0, Math.PI * 2);
			darknessCtx.globalCompositeOperation = "destination-out";
			darknessCtx.fill();
			darknessCtx.restore();

			ctx.font = "30px arial";
			ctx.fillStyle = "yellow";
			if (facasd) {
				ctx.fillText("Marina silva is a brazilian politician and an activist for deforestation and other things.", 0, 300);
				ctx.fillText("She was a rubber tapper and found that land was being invaded by rubber tappers and she", 0, 325);
				ctx.fillText("started protecting thousands of hectares of land.", 0, 350);
			};
			canvas.style.filter = ((playerY + 1.5 < level.rows[Math.floor(playerX)] + level.waterLevel[Math.floor(playerX)] && !divingSuit) ? "blur(5px) " : "") + (timeTraveling ? ("sepia(100%) brightness(" + (Math.random() * 0.1 + (1 - 0.1 / 2)) + ") ") : "");
			if (dead) {
				let gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
				gradient.addColorStop(0, "red");
				gradient.addColorStop(1, "rgba(0, 0, 0, 0)");
				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);
				ctx.font = "100px arial";
				ctx.fillStyle = "red";
				ctx.fillText("you died", 200, 200);
			};*/

			let healthPercent = health / maxHealth
			let healthR = clamp(2 - healthPercent * 2, 0, 1) * 255;
			let healthG = clamp(healthPercent * 2, 0, 1) * 255;
			let healthB = (potions["regeneration potion"].time > 0) * 127;
			document.getElementById("health").style.width = 600 * (maxHealth / 1) + "px";
			document.getElementById("health-inner").style.width = 600 * health + "px";
			document.getElementById("health-inner").style.backgroundColor = "rgb(" + healthR + ", " + healthG + ", " + healthB + ")";

			if (oxygen < 1) {
				document.getElementById("oxygen").style.display = "block";
				let oxygenPercent = oxygen;
				let oxygenR = clamp(2 - oxygenPercent * 2, 0, 1) * 255;
				let oxygenG = 0;
				let oxygenB = clamp(oxygenPercent * 2, 0, 1) * 255;
				document.getElementById("oxygen").style.width = 600 + "px";
				document.getElementById("oxygen-inner").style.width = 600 * oxygen + "px";
				document.getElementById("oxygen-inner").style.backgroundColor = "rgb(" + oxygenR + ", " + oxygenG + ", " + oxygenB + ")";
			} else {
				document.getElementById("oxygen").style.display = "none";
			};

			
			let minutes = (gameTime + 450) * ((12 * 60) / 300);
			document.getElementById("stats").innerHTML = "score: " + score + "<br>elevation: " + Math.floor(playerY) + "<br>coins: " + coins + "<br>gems: " + gems + "<br>totems: " + totems + "<br>boots: " + boots + "<br>fps: " + fps + "<br>time: " + ((Math.floor(minutes / 60) % 12) || 12) + ":" + Math.floor(minutes % 60).toString().padStart(2, "0") + (Math.floor(((Math.floor(minutes / 60) % 24) / 12)) ? " am" : " pm") + "<br>water volume: " + level.waterLevel.reduce((a, b) => a + b, 0);// + "<br>net player speed: " + (playerX - 1.5) / (gameTime * 60);
			document.getElementById("notification").innerHTML = notificationTime > 0 ? notification : "";
			for (let food in foods) {
				document.getElementById(food.replaceAll(" ", "-") + "-howmany").innerHTML = "(" + foods[food].howmany + ")";
			};
			for (let potion in potions) {
				document.getElementById(potion.replaceAll(" ", "-") + "-howmany").innerHTML = "(" + potions[potion].howmany + ")";
			};
			document.getElementById("ladder-howmany").innerHTML = "(" + ladders + ")";
			document.getElementById("tall-ladder-howmany").innerHTML = "(" + tallLadders + ")";
			document.getElementById("trampoline-howmany").innerHTML = "(" + trampolines + ")";
		};
		function loop() {
			//try {
				tick();
				drawScreen();
			//} catch (e) {
			//	alert(e.stack);
			//	return;
			//};
			frameCount++;
			let now = performance.now();
			if (Math.floor(fpsUpdateTime / 1000) !== Math.floor(now / 1000)) {
				fpsUpdateTime = now;
				fps = frameCount;
				frameCount = 0;
			};
			requestAnimationFrame(loop);
		};
		loop();
		//ctx.font = "100px arial";
		//ctx.fillText("loading textures", 100, 100);
	</script>
</html>
