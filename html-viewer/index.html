
<!DOCTYPE html>
<html>
	<head>
		<title>HTML viewer</title>
		<style>
			* {
				box-sizing: border-box;
			}
			body::-webkit-scrollbar {
				display: none;
			}
			body {
				-ms-overflow-style: none;
				scrollbar-width: none;
			}
			#nonfullscreen {
				display: block;
			}
			body {
				background-color:cornsilk;
				padding: 0px;
				margin: 0px;
			}
			.border {
				background-color: darkgray;
				text-align: center;
				user-select: none;
				font-size: 32px;
				display: block;
				border: none;
				float: left;
				font-weight: bold;
			}
			.border:hover {
				background-color: gray;
			}
			#embed {
				border: none;
				display: block;
				margin: 0px;
				padding: 0px;
				outline: none;
				border: none;
				background-color: white;
				width: 100%;
				height: 100vh;
			}
			textarea {
				resize: vertical;
				border: none;
				border-radius: 0px;
				white-space: pre;
				width: 100%;
				float: left;
				transition-duration: 0.2s;
				overflow: auto;
				outline: 1px solid black;
			}
			textarea:focus {
				border: none;
				box-shadow: 0px 5px 10px gray;
			}
			.exitfull {
				position: fixed;
				opacity: 0.3;
				border: 1px solid black;
				background-color: darkgray;
				top: 0px;
				left: 0px;
				width: 92px;
				height: 20px;
				padding: 0px;
				border-bottom-right-radius: 10px;
			}
			.exitfull:hover {
				opacity: 0.8;
				background-color: gray;
			}
			#title {
				background-color: lightgray;
				border: 2px solid slategray;
				width: 100%;
				height: 20px;
				float: left;
				overflow-x: auto;
				white-space: nowrap;
			}
			.verticalBar {
				width: 1px;
				height: 2em;
				display: inline;
				border: 1px ridge gray;
			}
		</style>
		<script>
			function save() {
				localStorage.setItem('HTMLSAVE', document.getElementById("input").value);
			};
			window.onload = function() {
				document.getElementById("input").value = localStorage.getItem('HTMLSAVE');
			};
			function download(filename, text) {
				var element = document.createElement('a');
				element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
				element.setAttribute('download', filename);
				
				element.style.display = 'none';
				document.body.appendChild(element);

				element.click();
				
				document.body.removeChild(element);
			};
			function downloadHTML() {
				download("index.html", document.getElementById("input").value);
			};
			window.onbeforeunload = function() {
				if (document.getElementById("input").value !== localStorage.getItem('HTMLSAVE')) {
					return 'Are you sure you want to leave?';
				};
			};
			function UpdateHTML() {
				if (document.getElementById("saveOnUpdate").checked) {
					save();
				};
				document.getElementById("title").innerHTML = "Title: ";
				document.getElementById("embed").srcdoc=document.getElementById("input").value;
				setTimeout(() => {
					document.getElementById("title").innerHTML = "Title: "+document.getElementById("embed").contentWindow.document.getElementsByTagName("title")[0].innerHTML;
				}, 100);
				
			};
			var fullscreen = false;
			function toggleFullScreen() {
				if (fullscreen == true) {
					fullscreen = false;
					document.getElementById("nonfullscreen").style.display="block";
					document.getElementsByClassName("exitfull")[0].style.display="none";
				} else {
					fullscreen = true;
					document.getElementById("nonfullscreen").style.display="none";
					document.getElementsByClassName("exitfull")[0].style.display="block";
				};
			};
			var darkModeOn = false;
			function darkMode() {
				if (darkModeOn == true) {
					darkModeOn = false;
					document.getElementById("input").style.backgroundColor="white";
					document.getElementById("input").style.color="black";
					document.getElementById("jsinput").style.backgroundColor="white";
					document.getElementById("jsinput").style.color="black";
					document.body.style="background-color: cornsilk; color: black";
					document.getElementById("title").style.color="black";
				} else {
					darkModeOn = true;
					document.getElementById("input").style.backgroundColor="darkslategray";
					document.getElementById("input").style.color="white";
					document.getElementById("jsinput").style.backgroundColor="darkslategray";
					document.getElementById("jsinput").style.color="white";
					document.body.style="background-color: #000723; color: white";
					document.getElementById("title").style.color="black";
				};
			};
			function unloadHTML() {
				document.getElementById("embed").srcdoc="";
				document.getElementById("title").innerHTML = "Title: ";
			};
			function runJavascript() {
				document.getElementById("embed").contentWindow.eval.call(window, document.getElementById("jsinput").value);
			};
			function inputFocus() {
				document.getElementById("input").style.overflow="auto";
			};
			function inputFocusOut() {
				document.getElementById("input").style.overflow="hidden";
			};
			function jsInputFocus() {
				document.getElementById("jsinput").style.overflow="auto";
			};
			function jsInputFocusOut() {
				document.getElementById("jsinput").style.overflow="hidden";
			};
		</script>
	</head>
	<body>
		<div id="nonfullscreen">
			<h1>HTML viewer</h1>
			<hr>
			<label>Settings:</label>
			<input id="darkmode" type="checkbox" onclick="darkMode();">Dark mode</input>
			<div class="verticalBar"></div>
			<button onclick="save(); this.innerHTML = 'Saved';" onmouseleave="this.innerHTML = 'Save';">Save</button>
			<div class="verticalBar"></div>
			<input type="checkbox" id="saveOnUpdate">Save on update</input>
			<div class="verticalBar"></div>
			<input type="checkbox" id="UpdateOnType">Update on type</input>
			<hr>
			<textarea onkeyup="if (document.getElementById('UpdateOnType').checked) {UpdateHTML();};" style="background-color:white;color:black; height: 30em;" onfocus="inputFocus();" onfocusout="inputFocusOut();" placeholder="Type HTML" id="input" spellcheck="false" onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}"></textarea><br>
			<textarea style="background-color:white;color:black; height: 2.8em;" onfocus="jsInputFocus();" onfocusout="jsInputFocusOut();" placeholder="Type javascript" id="jsinput" spellcheck="false" onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}"></textarea>
			<button class="border border-top" style="width:100%;" onclick="UpdateHTML();">Update HTML</button><br><br>
			<div id="title">Title: </div>
			<button class="border" style="width:25%;" onclick="downloadHTML();">Download</button>
			<button class="border" style="width:25%;" onclick="unloadHTML();">Unload HTML</button>
			<button class="border" style="width:25%;" onclick="runJavascript();">Run javascript</button>
			<button class="border" style="width:25%;" onclick="toggleFullScreen();">Fullscreen</button><br>
		</div>
	</body>
	<button style="display: none;" class="exitfull" onclick="toggleFullScreen()">Exit fullscreen</button>
	<iframe id="embed" srcdoc="<p>type in text box and press update html</p>"></iframe>
</html>
