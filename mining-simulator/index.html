
<!DOCTYPE html>
<html>
	<head>
		<title>Mining simulator</title>
		<link rel="icon" type="image/x-icon" href="img/favicon.png">
		<style>
			#opcButton {
				width: 100%;
				height: 50px;
				display: block;
				float: left;
			}
			button {
				border: 3px outset gold;
				background-color: orange;
			}
			button:hover {
				border: 3px inset orange;
				cursor: pointer;
				background-color: darkorange;
			}
			.container {
				background-color: lightgray;
				position: absolute;
				border: 10px double gray;
			}
			#machines {
				width: 25%;
				height: 79%;
				bottom: 0px;
				right: 0px;
			}
			body {
				text-align: center;
				background-image: url("img/background.png");
				overflow: hidden;
				user-drag: none;
				-webkit-user-drag: none;
				user-select: none;
				-moz-user-select: none;
				-webkit-user-select: none;
				-ms-user-select: none;
			}
			#miner {
				width: 100%;
				height: 300px;
				cursor: pointer;
				border: 3px solid gold;
				float: top;
				display: block;
				transition-duration: 0.1s;
				background-image: url("img/miner.png");
				background-size: 100%;
			}
			#miner:active {
				transform: scale(0.98,0.98)
			}
			#oreAnimation {
				display: none;
				position: absolute;
				left: 50%;
				top: 50%;
				color: cyan;
				user-select: none;
				font-family: arial;
				font-size: 20px;
				pointer-events: none
			}
			.gold {
				color: black;
				font-size: 30px;
				font-family: monospace;
				font-weight: bold;
				background-color: yellow;
				border: 10px double gold;
			}
			#ore {
				width: 100%;
			}
			#money {
				width: 45%;
				bottom: 0px;
				left: 27%;
				position: absolute;
			}
			.machine {
				width: 100%;
				height: 15%;
				background-color: darkgray;
				border: 2px solid darkslategray;
				text-align: left;
				line-height: 70%;
				transition-duration: 0.4s;
			}
			.machine:hover {
				transform: translate(-5px, 0px);
			}
			.machineImage {
				width: 25%;
				height: 100%;
				display: inline-block;
				float: left;
			}
			#oreUpgrader {
				width: 25%;
				height: 100px;
				line-height: 70%;
				bottom: 0px;
				left: 0px;
			}
			#oreUpgraderIcon {
				width: 25%;
				height: 100%;
				float: left;
			}
			#oreUpgraderButton {
				width: 75%;
				height: 50%;
				font-size: 16px;
			}
			#oreUpgraderTitle {
				width: 75%;
				height: 50%;
			}
			#minerContainer {
				width: 306px;
				height: 405px;
				top: 25%;
				left: 40%;
				display: block;
			}
			#cashInButton {
				width: 100%;
				height: 50px;
			}
		</style>
		<script>
			document.addEventListener("contextmenu", event => event.preventDefault());
			var tempGame = {
					machines: {
						drill: {name: "Drill", cost: 300, level: 0, ops: 0},
						digger: {name: "Digger", cost: 5000, level: 0, ops: 0},
						mineshaft: {name: "Mineshaft", cost: 50000, level: 0, ops: 0},
						dynamite: {name: "Dynamite", cost: 150000, level: 0, ops: 0}
					},
					ore: 0,
					money: 0,
					ops: 0,
					opc: 1,
					upgradeOpcCost: 100,
					oreValue: 1,
					oreLevel: 1,
					upgradeOreCost: 1000000
			};
			var Game = {
				...tempGame,
				...JSON.parse(localStorage.getItem("save"))
			};
			function save() {
				localStorage.setItem("save", JSON.stringify(Game));
			};
			function wipeSave() {
				if (confirm("do u want to wipe your save") == true) {
					Game = {...tempGame};
					save();
				};
			};
			window.onbeforeunload = function(){
				save();
			};
			function gameAlert(whatToAlert) {
				
			};
			function toCost(number) {
				return "(cost: $"+commas(number)+")";
			}
			function mine() {
				Game.ore = Game.ore+Game.opc;
				document.getElementById("oreAnimation").innerHTML = "+"+Game.opc;
				document.getElementById("oreAnimation").style.display = "block";
				setTimeout(function() {
					document.getElementById("oreAnimation").style.display = "none";
				}, 100);
			};
			function upgradeOpc() {
				if (Game.money >= Game.upgradeOpcCost) {
					Game.money = Game.money-Game.upgradeOpcCost;
					Game.opc = Game.opc*2;
					Game.upgradeOpcCost = Game.upgradeOpcCost*5;
					document.getElementById("opcButton").innerHTML = "double ore per click (cost: "+Math.ceil(Game.upgradeOpcCost)+")";
					document.getElementById("opcButton").title = "current ore per click: "+Game.opc;
				};
			};
			function levelUpDrill() {
				if (Game.money >= Game.machines.drill.cost) {
					Game.money = Game.money-Game.machines.drill.cost;
					Game.machines.drill.level++;
					Game.machines.drill.ops = Game.machines.drill.ops + 5;
					Game.ops = Game.ops + 5;
					Game.machines.drill.cost = Game.machines.drill.cost*1.5;
					document.getElementById("drillLevel").innerHTML = `Drill level: ${Game.machines.drill.level}`;
					document.getElementById("drillOps").innerHTML = `Drill ore per second: ${Game.machines.drill.ops}`;
					document.getElementById("drillButton").innerHTML = `Upgrade drill ${cost(Math.ceil(Game.machines.drill.cost))}`;
				};
			};
			function levelUpDigger() {
				if (Game.money >= Game.machines.digger.cost) {
					Game.money = Game.money-Game.machines.digger.cost;
					Game.machines.digger.level++;
					Game.machines.digger.ops = Game.machines.digger.ops + 50;
					Game.ops = Game.ops + 50;
					Game.machines.digger.cost = Game.machines.digger.cost*1.5;
					document.getElementById("diggerLevel").innerHTML = `Digger level: ${Game.machines.digger.level}`;
					document.getElementById("diggerOps").innerHTML = `Digger ore per second: ${Game.machines.digger.ops}`;
					document.getElementById("diggerButton").innerHTML = `Upgrade digger ${cost(Math.ceil(Game.machines.digger.cost))}`;
				};
			};
			function levelUpMineshaft() {
				if (Game.money >= Game.machines.mineshaft.cost) {
					Game.money = Game.money-Game.machines.mineshaft.cost;
					Game.machines.mineshaft.level++;
					Game.machines.mineshaft.ops = Game.machines.mineshaft.ops + 300;
					Game.ops = Game.ops + 300;
					Game.machines.mineshaft.cost = Game.machines.mineshaft.cost*1.5;
					document.getElementById("mineshaftLevel").innerHTML = `Mineshaft level: ${Game.machines.mineshaft.level}`;
					document.getElementById("mineshaftOps").innerHTML = `Mineshaft ore per second: ${Game.machines.mineshaft.ops}`;
					document.getElementById("mineshaftButton").innerHTML = `Upgrade mineshaft ${cost(Math.ceil(Game.machines.mineshaft.cost))}`;
				};
			};
			function levelUpDynamite() {
				if (Game.money >= Game.machines.dynamite.cost) {
					Game.money = Game.money-Game.machines.dynamite.cost;
					Game.machines.dynamite.level++;
					Game.machines.dynamite.ops = Game.machines.dynamite.ops + 300;
					Game.ops = Game.ops + 5000;
					Game.machines.dynamite.cost = Game.machines.dynamite.cost*1.5;
					document.getElementById("dynamiteLevel").innerHTML = `Dynamite level: ${Game.machines.mineshaft.level}`;
					document.getElementById("dynamiteOps").innerHTML = `Dynamite ore per second: ${Game.machines.mineshaft.ops}`;
					document.getElementById("dynamiteButton").innerHTML = `Upgrade dynamite ${cost(Math.ceil(Game.machines.dynamite.cost))}`;
				};
			};
			function getMoney() {
				return "$"+commas(Math.floor(Game.money));
			};
			function cost(number) {
				return "(cost: $"+commas(number)+")";
			};
			function toMoney(number) {
				return "$"+commas(number);
			};
			function upgradeOre() {
				if (Game.money >= Game.upgradeOreCost) {
					Game.money = Game.money-Game.upgradeOreCost;
					Game.oreLevel++;
				};
			};
			function commas(number) {
				return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
			};
			var saveCounter = 0;
			var tick = setInterval(() => {
				Game.ore = Game.ore+(Game.ops/100);
				document.getElementById("ore").innerHTML = `ore: ${commas(Math.ceil(Game.ore))}<br><small>(per second: ${commas(Math.ceil(Game.ops))} | per click: ${commas(Math.ceil(Game.opc))})`+"</small>";
				document.getElementById("money").innerHTML = `money: ${getMoney()}`;
				
				if (Game.upgradeOpcCost > Game.money) {
					document.getElementById("opcButton").disabled = true;
				} else {
					document.getElementById("opcButton").disabled = false;
				};
				if (Game.machines.drill.cost > Game.money) {
					document.getElementById("drillButton").disabled = true;
				} else {
					document.getElementById("drillButton").disabled = false;
				};
				if (Game.machines.digger.cost > Game.money) {
					document.getElementById("diggerButton").disabled = true;
				} else {
					document.getElementById("diggerButton").disabled = false;
				};
				if (Game.machines.mineshaft.cost > Game.money) {
					document.getElementById("mineshaftButton").disabled = true;
				} else {
					document.getElementById("mineshaftButton").disabled = false;
				};
				if (Game.machines.dynamite.cost > Game.money) {
					document.getElementById("dynamiteButton").disabled = true;
				} else {
					document.getElementById("dynamiteButton").disabled = false;
				};
				if (Game.upgradeOreCost > Game.money) {
					document.getElementById("oreUpgraderButton").disabled = true;
				} else {
					document.getElementById("oreUpgraderButton").disabled = false;
				};
				
				
				if (Game.oreLevel == 2) {
					Game.upgradeOreCost = 1e+300;
					Game.oreValue = 3;
					document.getElementById("oreUpgraderIcon").src = "img/copper_ore.png";
					document.getElementById("oreUpgraderTitle").src = "img/copper_ore_title.png";
				};
				document.getElementById("oreUpgraderButton").innerHTML = `Upgrade ore ${cost(Game.upgradeOreCost)}`;
				document.getElementById("cashInButton").innerHTML = `Cash in ${commas(Math.ceil(Game.ore))} ore for ${toMoney(commas(Math.ceil(Game.ore*Game.oreValue)))}`;
				saveCounter++;
				if (saveCounter >= 6000) {
					save();
					saveCounter = 0;
				};
			}, 10);
			function cashInOre() {
				Game.money = Game.money+(Game.ore*Game.oreValue);
				Game.ore = 0;
			};
		</script>
	</head>
	<body>
		<div id="ore" class="gold">ore: 0<br>(per second: 0; per click: 1)</div><br>
		<div id="minerContainer" class="container">
			<button id="opcButton" title="current ore per click: 1" onclick="upgradeOpc()">double ore per click (cost: 100)</button><br><br>
			<button title="click to mine ore" id="miner" alt="the miner" onclick="mine();"></button>
				<div id="oreAnimation">+1</div>
			</img>
			<button id="cashInButton" onclick="cashInOre()">Cash in 0 ore for $0</button>
		</div>
		<div id="machines" class="container">
			<div class="machine">
				<img src="img/drill_icon.png" class="machineImage" alt="drill image">
				<button class="upgradeMachine" id="drillButton" onclick="levelUpDrill();">Upgrade drill (cost: $300)</button><br>
				<div id="drillLevel">Drill level: 0</div><br>
				<div id="drillOps">Drill ore per second: 0</div>
			</div>
			<div class="machine">
				<img src="img/digger_icon.png" class="machineImage" alt="digger image">
				<button class="upgradeMachine" id="diggerButton" onclick="levelUpDigger();">Upgrade digger (cost: $5000)</button><br>
				<div id="diggerLevel">Digger level: 0</div><br>
				<div id="diggerOps">Digger ore per second: 0</div>
			</div>
			<div class="machine">
				<img src="img/mineshaft_icon.png" class="machineImage" alt="mineshaft image">
				<button class="upgradeMachine" id="mineshaftButton" onclick="levelUpMineshaft();">Upgrade mineshaft (cost: $50,000)</button><br>
				<div id="mineshaftLevel">Mineshaft level: 0</div><br>
				<div id="mineshaftOps">Mineshaft ore per second: 0</div>
			</div>
			<div class="machine">
				<img src="img/dynamite_icon.png" class="machineImage" alt="dynamite image">
				<button class="upgradeMachine" id="dynamiteButton" onclick="levelUpDynamite();">Upgrade dynamite (cost: $150,000)</button><br>
				<div id="dynamiteLevel">Dynamite level: 0</div><br>
				<div id="dynamiteOps">Dymanite ore per second: 0</div>
			</div>
		</div>
		<div id="oreUpgrader" class="container">
			<img src="img/coal_ore.png" alt="ore image" id="oreUpgraderIcon">
			<img src="img/coal_ore_title.png" alt="ore title" id="oreUpgraderTitle">
			<button id="oreUpgraderButton" onclick="upgradeOre();">Upgrade ore (cost: $1,000,000)</button>
		</div>
		<div id="money" class="gold">money: $0<br></div>
		<div id="settings" class="container">
			<button onclick="wipeSave()">Wipe save</button><br>
			<button onclick="save()" style="width: 100%">Save</button>
			<!--<input type="checkbox" id="rightClickCheckbox">right click</input>-->
		</div>
	</body>
</html>
