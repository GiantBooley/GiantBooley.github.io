<!DOCTYPE html>
<html>
	<head>
		<title>Mining simulator</title>
		<style>
			button {
				border: 3px outset gold;
				background-color: orange;
			}
			button:hover {
				border-style: inset;
			}
			#machines {
				background-color: lightgray;
				position: absolute;
				width: 25%;
				height: 79%;
				bottom: 0px;
				right: 0px;
				border: 10px double gray;
			}
			body {
				text-align: center;
				background-image: url("https://thumbs.dreamstime.com/b/dirt-texture-12611254.jpg");
				overflow: hidden;
				user-drag: none;
				-webkit-user-drag: none;
				user-select: none;
				-moz-user-select: none;
				-webkit-user-select: none;
				-ms-user-select: none;
			}
			#miner {
				width: 300px;
				height: 300px;
				cursor: pointer;
				border: 3px solid gold;
			}
			#coalAnimation {
				display: none;
				position: absolute;
				left: 690px;
				top: 250px;
				color: cyan;
				user-select: none;
				font-family: arial;
				font-size: 20px;
			}
			#coal {
				color: black;
				font-size: 30px;
				font-family: monospace;
				font-weight: bold;
				background-color: yellow;
				border: 5px double gold;
				width: 100%;
			}
			.machine {
				width: 100%;
				height: 15%;
				background-color: darkgray;
				border: 2px solid darkslategray;
				text-align: left;
				line-height: 70%;
			}
			.machineImage {
				width: 25%;
				height: 100%;
				display: inline-block;
				float: left;
			}
			img {
				user-drag: none;
 				-webkit-user-drag: none;
				user-select: none;
				-moz-user-select: none;
				-webkit-user-select: none;
				-ms-user-select: none;
			}
		</style>
		<script>
			var machines = {drill: {name: "Drill", cost: 300, level: 0, cps: 0}, digger: {name: "Digger", cost: 5000, level: 0, cps: 0}, mineshaft: {name: "Mineshaft", cost: 50000, level: 0, cps: 0}};
			var cps = 0;
			var coal = 0;
			var cpc = 1;
			var upgradeCpcCost = 100;
			function mine() {
				coal = coal+cpc;
				document.getElementById("coalAnimation").innerHTML = "+"+cpc;
				document.getElementById("coalAnimation").style.display = "block";
				setTimeout(function() {
					document.getElementById("coalAnimation").style.display = "none";
				}, 100);
			};
			function upgradeCpc() {
				if (coal >= upgradeCpcCost) {
					coal = coal-upgradeCpcCost;
					cpc = cpc*2;
					upgradeCpcCost = upgradeCpcCost*2.5;
					document.getElementById("cpcButton").innerHTML = "double coal per click (cost: "+Math.ceil(upgradeCpcCost)+")";
					document.getElementById("cpcButton").title = "current coal per click: "+cpc;
					document.getElementById("coal").innerHTML = "coal: "+Math.ceil(coal);
				};
			};
			function levelUpDrill() {
				if (coal >= machines.drill.cost) {
					coal = coal-machines.drill.cost;
					machines.drill.level++;
					cps = cps-machines.drill.cps;
					machines.drill.cps = machines.drill.cps + 5;
					cps = cps+machines.drill.cps;
					machines.drill.cost = machines.drill.cost*1.5;
					document.getElementById("drillLevel").innerHTML = "Drill level: "+machines.drill.level;
					document.getElementById("drillCps").innerHTML = "Drill coal per second: "+machines.drill.cps;
					document.getElementById("drillButton").innerHTML = "Upgrade drill (cost: "+Math.ceil(machines.drill.cost)+")";
				};
			};
			function levelUpDigger() {
				if (coal >= machines.digger.cost) {
					coal = coal-machines.digger.cost;
					machines.digger.level++;
					cps = cps-machines.digger.cps;
					machines.digger.cps = machines.digger.cps + 50;
					cps = cps+machines.digger.cps;
					machines.digger.cost = machines.digger.cost*1.5;
					document.getElementById("diggerLevel").innerHTML = "Digger level: "+machines.digger.level;
					document.getElementById("diggerCps").innerHTML = "Digger coal per second: "+machines.digger.cps;
					document.getElementById("diggerButton").innerHTML = "Upgrade digger (cost: "+Math.ceil(machines.digger.cost)+")";
				};
			};
			function levelUpMineshaft() {
				if (coal >= machines.mineshaft.cost) {
					coal = coal-machines.mineshaft.cost;
					machines.mineshaft.level++;
					cps = cps-machines.mineshaft.cps;
					machines.mineshaft.cps = machines.mineshaft.cps + 300;
					cps = cps+machines.mineshaft.cps;
					machines.mineshaft.cost = machines.mineshaft.cost*1.5;
					document.getElementById("mineshaftLevel").innerHTML = "Mineshaft level: "+machines.mineshaft.level;
					document.getElementById("mineshaftCps").innerHTML = "Mineshaft coal per second: "+machines.mineshaft.cps;
					document.getElementById("mineshaftButton").innerHTML = "Upgrade mineshaft (cost: "+Math.ceil(machines.mineshaft.cost)+")";
				};
			};
			var tick = setInterval(function(){
				coal = coal+(cps/100);
				document.getElementById("coal").innerHTML = "coal: "+Math.ceil(coal)+"<br>(per second: "+Math.ceil(cps)+")";
				
				
				if (upgradeCpcCost > coal) {
					document.getElementById("cpcButton").disabled = true;
				} else {
					document.getElementById("cpcButton").disabled = false;
				};
				if (machines.drill.cost > coal) {
					document.getElementById("drillButton").disabled = true;
				} else {
					document.getElementById("drillButton").disabled = false;
				};
				if (machines.digger.cost > coal) {
					document.getElementById("diggerButton").disabled = true;
				} else {
					document.getElementById("diggerButton").disabled = false;
				};
				if (machines.mineshaft.cost > coal) {
					document.getElementById("mineshaftButton").disabled = true;
				} else {
					document.getElementById("mineshaftButton").disabled = false;
				};
				
				
			}, 10);
		</script>
	</head>
	<body>
		<p id="coal">coal: 0<br>(per second: 0)</p><br>
		<button id="cpcButton" title="current coal per click: 1" onclick="upgradeCpc()">double coal per click (cost: 100)</button><br><br>
		<img title="click to mine coal" id="miner" alt="the miner" onclick="mine();" src="https://image.shutterstock.com/shutterstock/photos/74197867/display_1500/stock-photo-satisfied-male-miner-with-pick-axe-showing-thumbs-up-74197867.jpg">
		<div id="coalAnimation">+1</div>
		</img><br>
		<div id="machines">
			<div class="machine">
				<img src="https://lh3.googleusercontent.com/proxy/J84I2s0l6bCXaq2XeySRdGGnTo1Rqvlv765jFA7ZT-DRcXttFy72Twa1C5_EoGLhf7f-M25Z-UoduHzmclSQspOl2UHqwVzG7VRL8hO8FNCt8tLVnhFSgJfVmCLyWa7r-auPJ9pQqxSuv5VWR3sMtvzYcJ-wS9u8spGc-TbcByGvKFiO9-bjc3fuN4r_kUve5i2Ev1oI" class="machineImage" alt="drill image">
				<button class="upgradeMachine" id="drillButton" onclick="levelUpDrill();">Upgrade drill (cost: 300)</button><br>
				<div id="drillLevel">Drill level: 0</div><br>
				<div id="drillCps">Drill coal per second: 0</div>
			</div>
			<div class="machine">
				<img src="https://www.diggerland.com/wp-content/uploads/2020/10/MonsterDigger3.png" class="machineImage" alt="digger image">
				<button class="upgradeMachine" id="diggerButton" onclick="levelUpDigger();">Upgrade digger (cost: 5000)</button><br>
				<div id="diggerLevel">Digger level: 0</div><br>
				<div id="diggerCps">Digger coal per second: 0</div>
			</div>
			<div class="machine">
				<img src="https://image.shutterstock.com/image-photo/abandoned-copper-ore-mine-underground-260nw-1699759951.jpg" class="machineImage" alt="mineshaft image">
				<button class="upgradeMachine" id="mineshaftButton" onclick="levelUpMineshaft();">Upgrade mineshaft (cost: 50000)</button><br>
				<div id="mineshaftLevel">Mineshaft level: 0</div><br>
				<div id="mineshaftCps">Mineshaft coal per second: 0</div>
			</div>
		</div>
		
	</body>
</html>
